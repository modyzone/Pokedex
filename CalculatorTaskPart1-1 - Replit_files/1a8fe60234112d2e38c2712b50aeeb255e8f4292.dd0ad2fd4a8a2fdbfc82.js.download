(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"1Ql/":function(e,r,t){"use strict";t.d(r,"a",(function(){return u})),t.d(r,"b",(function(){return d})),t.d(r,"c",(function(){return p}));var n=t("xvhg"),o=t("Yk1I"),i=t.n(o),a=function(e){return e.length>0&&"number"===typeof e[e.length-1]&&e.pop(),e},c=function(e){if(!Array.isArray(e))throw Error("Op must be an array of components");for(var r=null,t=0;t<e.length;t++){var n=e[t];switch(typeof n){case"object":if(!("number"===typeof n.d&&n.d>0))throw Error("Object components must be deletes of size > 0");break;case"string":if(!(n.length>0))throw Error("Inserts cannot be empty");break;case"number":if(!(n>0))throw Error("Skip components must be >0");if("number"===typeof r)throw Error("Adjacent skip components should be combined")}r=n}if("number"===typeof r)throw Error("Op has a trailing skip")},s=function(e){return"number"===typeof e?e:"string"===typeof e?e.length:e.d};function u(e,r){c(e),c(r);for(var t,n=[],o=l(n),i=f(e)[0],u=0;u<r.length;u++){var d=r[u],p=void 0,h=void 0;switch(typeof d){case"number":for(p=d;p>0;)(h=i(p,"d"))&&o(h),"object"!==typeof h&&(p-=s(h));break;case"string":o(d);break;case"object":for(p=d.d;p>0;)switch(typeof(h=i(p,"d"))){case"number":o({d:h}),p-=h;break;case"string":p-=h.length;break;case"object":h&&o(h)}}}for(;t=i(-1);)o(t);return a(n)}function l(e){return function(r){r&&0!==r.d&&(0===e.length?e.push(r):typeof r===typeof e[e.length-1]?"object"===typeof r?e[e.length-1].d+=r.d:e[e.length-1]+=r:e.push(r))}}function f(e){var r=0,t=0;return[function(n,o){if(r===e.length)return-1===n?null:n;var i,a=e[r];return"number"===typeof a?-1===n||a-t<=n?(i=a-t,++r,t=0,i):(t+=n,n):"string"===typeof a?-1===n||"i"===o||a.length-t<=n?(i=a.slice(t),++r,t=0,i):(i=a.slice(t,t+n),t+=n,i):-1===n||"d"===o||a.d-t<=n?(i={d:a.d-t},++r,t=0,i):(t+=n,{d:n})},function(){return e[r]}]}function d(e,r){if(e===r)return[];var t=[],o=function(e){e&&0!==e.d&&(0===t.length?t.push(e):typeof e===typeof t[t.length-1]?"object"===typeof e?t[t.length-1].d+=e.d:t[t.length-1]+=e:t.push(e))};return i()(e,r).forEach((function(e){var r=Object(n.a)(e,2),t=r[0],a=r[1];switch(t){case i.a.INSERT:o(a);break;case i.a.DELETE:o({d:a.length});break;case i.a.EQUAL:o(a.length)}})),t.length>0&&"number"===typeof t[t.length-1]&&t.pop(),t}function p(e,r,t){if("left"!==t&&"right"!==t)throw Error("side ("+t+") must be 'left' or 'right'");c(e),c(r);for(var o,i=[],u=l(i),d=f(e),p=Object(n.a)(d,2),h=p[0],m=p[1],v=0;v<r.length;v++){var b=r[v],g=void 0,y=void 0;switch(typeof b){case"number":for(g=b;g>0;)u(y=h(g,"i")),"string"!==typeof y&&(g-=s(y));break;case"string":"left"===t&&"string"===typeof m()&&u(h(-1)),u(b.length);break;case"object":for(g=b.d;g>0;)switch(typeof(y=h(g,"i"))){case"number":g-=y;break;case"string":u(y);break;case"object":g-=y.d}}}for(;o=h(-1);)u(o);return a(i)}},"8/ze":function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var n="."},"8v8i":function(e,r,t){"use strict";var n,o,i,a,c,s;t.d(r,"a",(function(){return n})),t.d(r,"b",(function(){return o})),t.d(r,"d",(function(){return i})),t.d(r,"e",(function(){return a})),t.d(r,"c",(function(){return s})),function(e){e.Create="CREATE",e.Move="MOVE",e.Delete="DELETE",e.Modify="MODIFY"}(n||(n={})),function(e){e.Local="LOCAL",e.Container="CONTAINER"}(o||(o={})),function(e){e.File="FILE",e.Directory="DIRECTORY"}(i||(i={})),function(e){e.NotFound="NOT_FOUND",e.AlreadyExists="ALREADY_EXIST",e.NotDirectory="NOT_DIRECTORY",e.IsDirectory="IS_DIRECTORY"}(a||(a={})),function(e){e.Offline="OFFLINE",e.Loading="LOADING",e.Syncing="SYNCING",e.Clean="CLEAN",e.Error="ERROR"}(c||(c={})),function(e){e.Dirty="DIRTY",e.Syncing="SYNCING",e.Clean="CLEAN"}(s||(s={}))},HtvZ:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("Z5Wq"),o=function(e){if(!Array.isArray(e))throw Error("Op must be an array of components");for(var r=null,t=0;t<e.length;t++){var n=e[t];switch(typeof n){case"object":if(!("number"===typeof n.d&&n.d>0))throw Error("Object components must be deletes of size > 0");break;case"string":if(!(n.length>0))throw Error("Inserts cannot be empty");break;case"number":if(!(n>0))throw Error("Skip components must be >0");if("number"===typeof r)throw Error("Adjacent skip components should be combined")}r=n}if("number"===typeof r)throw Error("Op has a trailing skip")},i=function(e){for(var r=[],t=a(r),n=0;n<e.length;n++)t(e[n]);return u(r)},a=function(e){return function(r){r&&0!==r.d&&(0===e.length?e.push(r):typeof r===typeof e[e.length-1]?"object"===typeof r?e[e.length-1].d+=r.d:e[e.length-1]+=r:e.push(r))}},c=function(e){return"number"===typeof e?e:"string"===typeof e?n.strPosToUni(e):e.d},s=function(e){var r=0,t=0;return{take:function(o,i){if(r===e.length)return-1===o?null:o;var a,c=e[r];if("number"===typeof c)return-1===o||c-t<=o?(a=c-t,++r,t=0,a):(t+=o,o);if("string"===typeof c){if(-1===o||"i"===i||n.strPosToUni(c.slice(t))<=o)return a=c.slice(t),++r,t=0,a;var s=t+n.uniToStrPos(c.slice(t),o);return a=c.slice(t,s),t=s,a}return-1===o||"d"===i||c.d-t<=o?(a={d:c.d-t},++r,t=0,a):(t+=o,{d:o})},peek:function(){return e[r]}}},u=function(e){return e.length>0&&"number"===typeof e[e.length-1]&&e.pop(),e};function l(e,r,t){if("left"!==t&&"right"!==t)throw Error("side ("+t+") must be 'left' or 'right'");o(e),o(r);for(var i,l=[],f=a(l),d=s(e),p=d.take,h=d.peek,m=0;m<r.length;m++){var v=r[m],b=void 0,g=void 0;switch(typeof v){case"number":for(b=v;b>0;)f(g=p(b,"i")),"string"!==typeof g&&(b-=c(g));break;case"string":"left"===t&&"string"===typeof h()&&f(p(-1)),f(n.strPosToUni(v));break;case"object":for(b=v.d;b>0;)switch(typeof(g=p(b,"i"))){case"number":b-=g;break;case"string":f(g);break;case"object":b-=g.d}}}for(;i=p(-1);)f(i);return u(l)}function f(e,r){o(e),o(r);for(var t,i=[],l=a(i),f=s(e).take,d=0;d<r.length;d++){var p=r[d],h=void 0,m=void 0;switch(typeof p){case"number":for(h=p;h>0;)l(m=f(h,"d")),"object"!==typeof m&&(h-=c(m));break;case"string":l(p);break;case"object":for(h=p.d;h>0;)switch(typeof(m=f(h,"d"))){case"number":l({d:m}),h-=m;break;case"string":h-=n.strPosToUni(m);break;case"object":l(m)}}}for(;t=f(-1);)l(t);return u(i)}var d=function(e,r){for(var t=0,o=0;o<r.length&&e>t;o++){var i=r[o];switch(typeof i){case"number":t+=i;break;case"string":var a=n.strPosToUni(i);t+=a,e+=a;break;case"object":e-=Math.min(i.d,e-t)}}return e},p=function(e,r){return"number"===typeof e?d(e,r):e.map((function(e){return d(e,r)}))};r.default=function(e){return{name:"text-unicode",uri:"http://sharejs.org/types/text-unicode",trim:u,normalize:i,checkOp:o,create:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof r)throw Error("Initial data must be a string");return e.create(r)},apply:function(r,t){o(t);for(var n=e.builder(r),i=0;i<t.length;i++){var a=t[i];switch(typeof a){case"number":n.skip(a);break;case"string":n.append(a);break;case"object":n.del(a.d)}}return n.build()},transform:l,compose:f,transformPosition:d,transformSelection:p}}},"LI1+":function(e,r,t){"use strict";t.d(r,"c",(function(){return g})),t.d(r,"a",(function(){return y})),t.d(r,"b",(function(){return w}));var n=t("BGKE"),o=t("xvhg"),i=t("MX0m"),a=t.n(i),c=t("q1tI"),s=t("HADy"),u=t("4A0d");function l(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return f(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var d=t("YuJD"),p=t("up5I"),h=t("DgdK"),m=t("5zsw"),v=t("xom/"),b=function(e,r){var t=e.runner,i=e.packager,f=e.languageHeader,p=e.onClear,h=function(e){var r=e.runner,t=e.packager,n=e.languageHeader,i=Object(u.a)({}),a=Object(o.a)(i,2),f=a[0],d=a[1],p=c.useState(""),h=Object(o.a)(p,2),m=h[0],v=h[1];return c.useEffect((function(){if(!f)return r.onOutput((function(e){return v((function(r){return r+e}))}))}),[f,r,v]),c.useEffect((function(){if(!f&&t)return t.onOutput((function(e){return v((function(r){return r+e.replace(/\n/g,"\n\r")}))}))}),[f,t,v]),c.useEffect((function(){if(f&&t)return t.onOutput((function(e){return f.write(e.replace(/\n/g,"\n\r"))}))}),[f,t]),c.useEffect((function(){m&&f&&(f.write(m),v(""))}),[f,m]),c.useEffect((function(){n&&v((function(e){return e+"".concat(n.replace(/\n/g,"\n\r"),"\n\r")}))}),[n,v]),c.useEffect((function(){if(f){var e=function(){r.getRunState()!==s.b.OFFLINE&&r.resizeTerminal(f.getSize())},t=[];t.push(f.onResize(e).dispose);var n=[];t.push(f.onData((function(e){r.getRunState()!==s.b.OFFLINE?r.sendInput(e):n.push(e)})).dispose),t.push(r.onOutput((function(e){f.write(e)})));var o=!1;return t.push(r.onStateChanged((function(t){if(t!==s.b.OFFLINE){if(o||(e(),o=!0),n.length){var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var c=i.value;r.sendInput(c)}}catch(u){a.e(u)}finally{a.f()}n=[]}}else o=!1}))),r.getRunState()!==s.b.OFFLINE&&(e(),o=!0),function(){t.forEach((function(e){return e()}))}}}),[f,r]),[f,d]}({runner:t,packager:i,languageHeader:f}),m=Object(o.a)(h,2),b=m[0],x=m[1],O=c.useState(!1),j=Object(o.a)(O,2),k=j[0],E=j[1];return c.useImperativeHandle(r,(function(){return{clear:function(){b&&b.clear()}}})),Object(n.c)("div",{onKeyDown:function(e){"f"===e.key&&Object(d.b)(e)&&!e.shiftKey&&(E(!0),e.preventDefault())},className:"jsx-859900303 replit-ui-theme-root dark terminal",children:[Object(n.b)("div",{className:"jsx-859900303 controls",children:Object(n.c)(v.a,{align:"center",wrap:"nowrap",children:[k&&b?Object(n.b)(g,{findPrevious:b.findPrevious,findNext:b.findNext,exit:function(){return E(!1)}}):Object(n.b)(w,{onClick:function(){return E(!0)}}),Object(n.b)(y,{onClick:function(){b&&(b.clear(),p&&p(),f&&b.write("".concat(f.replace(/\n/g,"\n\r"),"\n\r")),b.focus())}})]})}),Object(n.b)("div",{ref:x,className:"jsx-859900303 xterm-container"}),Object(n.b)(a.a,{id:"859900303",children:[".terminal.jsx-859900303{height:100%;width:100%;position:relative;background-color:var(--deprecated-color-brand-dark-blue);border-radius:var(--deprecated-border-radius-1);}",".controls.jsx-859900303{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;position:absolute;top:var(--deprecated-spacing-1);right:var(--deprecated-spacing-1);z-index:100;min-height:30px;}",".xterm-container.jsx-859900303{height:100%;overflow:auto;}",".xterm-container.jsx-859900303 .xterm{height:100%;padding:var(--deprecated-spacing-2) var(--deprecated-spacing-2) var(--deprecated-spacing-half);}",".xterm-container.jsx-859900303 .xterm-viewport{overflow-y:auto !important;border-radius:var(--deprecated-border-radius-1);}"]})]})};r.d=c.forwardRef(b);function g(e){var r=e.findNext,t=e.findPrevious,i=e.exit,s=c.useRef(null),u=c.useState(""),l=Object(o.a)(u,2),f=l[0],d=l[1];c.useEffect((function(){s.current&&s.current.focus()}),[]);return Object(n.c)("div",{className:"jsx-2416666737 search",children:[Object(n.b)("input",{ref:s,placeholder:"Find",value:f,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){return function(e){"Escape"!==e.key?"Enter"===e.key&&(e.shiftKey?t(f):r(f)):i()}(e)},className:"jsx-2416666737"}),Object(n.b)(p.a,{size:"small",onClick:function(){return r(f)},children:"Next"}),Object(n.b)(p.a,{size:"small",onClick:function(){return t(f)},children:"Previous"}),Object(n.b)(p.a,{size:"small",onClick:i,children:"Exit"}),Object(n.b)(a.a,{id:"2416666737",children:[".search.jsx-2416666737{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:30px;}","input.jsx-2416666737{padding:4px var(--deprecated-spacing-1) var(--deprecated-spacing-half);background-color:var(--deprecated-color-background-1);color:var(--deprecated-color-white);height:24px;width:85px;border:none;border-radius:var(--deprecated-border-radius-1);box-shadow:none;}","input.jsx-2416666737::-webkit-input-placeholder{color:var(--deprecated-color-white);}","input.jsx-2416666737::-moz-placeholder{color:var(--deprecated-color-white);}","input.jsx-2416666737:-ms-input-placeholder{color:var(--deprecated-color-white);}","input.jsx-2416666737::placeholder{color:var(--deprecated-color-white);}","input.jsx-2416666737:focus{outline:none;border:var(--deprecated-color-primary-1);}","input.jsx-2416666737,.search button{margin:0 var(--deprecated-spacing-half);}"]})]})}var y=function(e){var r=e.onClick;return Object(n.c)("button",{"aria-label":"Clear","data-microtip-position":"bottom-left",role:"tooltip",onClick:r,className:"jsx-2790382866",children:[Object(n.b)(m.a,{size:"medium"}),Object(n.b)(a.a,{id:"2790382866",children:["button.jsx-2790382866{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:var(--deprecated-border-radius-1);padding:var(--deprecated-spacing-half);background-color:var(--deprecated-color-brand-dark-blue);color:var(--deprecated-color-foreground-1);-webkit-transition:background-color 0.2s;transition:background-color 0.2s;border:none;cursor:pointer;}","button.jsx-2790382866:hover{background-color:var(--deprecated-color-control-2);}","button.jsx-2790382866:focus{outline:none;}"]})]})},w=function(e){var r=e.onClick;return Object(n.c)("button",{"aria-label":"Search","data-microtip-position":"bottom",role:"tooltip",onClick:r,className:"jsx-2790382866",children:[Object(n.b)(h.a,{size:"medium"}),Object(n.b)(a.a,{id:"2790382866",children:["button.jsx-2790382866{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:var(--deprecated-border-radius-1);padding:var(--deprecated-spacing-half);background-color:var(--deprecated-color-brand-dark-blue);color:var(--deprecated-color-foreground-1);-webkit-transition:background-color 0.2s;transition:background-color 0.2s;border:none;cursor:pointer;}","button.jsx-2790382866:hover{background-color:var(--deprecated-color-control-2);}","button.jsx-2790382866:focus{outline:none;}"]})]})}},NuhN:function(e,r,t){"use strict";t.d(r,"c",(function(){return o})),t.d(r,"b",(function(){return i})),t.d(r,"a",(function(){return a})),t.d(r,"e",(function(){return c})),t.d(r,"d",(function(){return s}));function n(e){return""===e||e.endsWith("/")?e:e+"/"}function o(e,r){return Object.keys(e).filter((function(e){return i(r,e)}))}function i(e,r){return r!==e&&r.startsWith(n(e))}function a(e,r){if(!i(e,r))return!1;var t=n(e),o=r.slice(t.length);return o.endsWith("/")&&(o=o.slice(-1)),!o.includes("/")}function c(e,r,t){var n=o(e,r).map((function(e){return[e,s(r,t,e)]}));return"undefined"!==typeof e[r]&&n.unshift([r,t]),n}function s(e,r,t){var o=n(e);return n(r)+t.slice(o.length)}},VOEV:function(e,r,t){"use strict";t.d(r,"a",(function(){return ce}));var n=t("cpVT"),o=t("vJKn"),i=t.n(o),a=t("rg98"),c=t("z7pX"),s=t("gfZM"),u=t("8v8i"),l=t("dI/k"),f=t("NuhN"),d=t("8/ze"),p=t("5/z4"),h=t("H+61"),m=t("UlJF"),v=t("+Css"),b=t("7LId"),g=t("VIvw"),y=t("iHvq"),w=t("+qE3"),x=t("cC09"),O=t("cHV+"),j=t("9/5/"),k=t.n(j),E=t("Z5Wq"),C=t("zgDP"),S=t("1Ql/"),T=t("xvhg");function D(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return P(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function P(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var I={replsList:function(){return"services-dataLossRepls"},replFiles:function(e){return"services-dataLossReplFiles".concat(e)},latestOp:function(e,r){return"services-dataLossLatestOp--".concat(e,"--").concat(r)},latestFlushedOp:function(e,r){return"services-datalossLatestFlushed--".concat(e,"--").concat(r)},latestOwnOp:function(e,r){return"services-dataLosslatestOwnOp--".concat(e,"--").concat(r)}};function F(e,r){for(var t={latestOp:null,latestFlushedOp:null,latestOwnOp:null},n=0,o=Object.keys(t);n<o.length;n++){var i=o[n],a=localStorage.getItem(I[i](e,r));if(a){var c=void 0;try{c=JSON.parse(a)}catch(s){continue}c&&"object"===typeof c&&"number"===typeof c.crc32&&"number"===typeof c.version&&(t[i]=c)}}return t}function R(){var e=localStorage.getItem(I.replsList()),r=[];if(e){try{r=JSON.parse(e)}catch(t){localStorage.setItem(I.replsList(),"[]")}Array.isArray(r)||(r=[],localStorage.setItem(I.replsList(),"[]"))}return r}function N(e){var r=localStorage.getItem(I.replFiles(e)),t=[];if(r){try{t=JSON.parse(r)}catch(n){localStorage.setItem(I.replFiles(e),"[]")}Array.isArray(t)||(t=[],localStorage.setItem(I.replFiles(e),"[]"))}return t}function _(e){var r,t=D(N(e));try{for(t.s();!(r=t.n()).done;){var n=r.value;"string"===typeof n&&A(e,n)}}catch(i){t.e(i)}finally{t.f()}localStorage.removeItem(I.replFiles(e));var o=R().filter((function(r){return r!==e}));localStorage.setItem(I.replsList(),JSON.stringify(o))}function A(e,r){localStorage.removeItem(I.latestOp(e,r)),localStorage.removeItem(I.latestFlushedOp(e,r)),localStorage.removeItem(I.latestOwnOp(e,r));var t=N(e).filter((function(e){return e!==r}));localStorage.setItem(I.replFiles(e),JSON.stringify(t))}function L(e,r){!function(e){var r=R();r.includes(e)||(r.length>30?(_(r[0]),r[0]=e):r.push(e),localStorage.setItem(I.replsList(),JSON.stringify(r)))}(e);var t=N(e);t.includes(r)||(t.length>30?(_(t[0]),t[0]=r):t.push(r),localStorage.setItem(I.replFiles(e),JSON.stringify(t)))}function M(e){var r=e.filePath,t=e.replId,n=e.opType,o=e.op;localStorage.setItem(I[n](t,r),JSON.stringify(o))}var U={};function B(e){return z.apply(this,arguments)}function z(){return(z=Object(a.a)(i.a.mark((function e(r){var t,n,o,c,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.filePath,n=r.replId,o=r.serverVersion,c=r.serverContent,s=r.fetchOps,!U[t+n]){e.next=3;break}return e.abrupt("return");case 3:U[t+n]=!0,u=F(n,t),l=x.str(c)>>>0,Object.keys(u).forEach(function(){var e=Object(a.a)(i.a.mark((function e(r){var t,a,c,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u[r]){e.next=3;break}return e.abrupt("return");case 3:if(!(o<t.version)){e.next=6;break}return Object(C.track)(C.events.OT_FILE_DATA_LOST,{opType:r,case:"server_forgot",replId:n,isServices:!0}),e.abrupt("return");case 6:if(o!==t.version){e.next=9;break}return l!==t.crc32&&Object(C.track)(C.events.OT_FILE_DATA_LOST,{opType:r,case:"crc32_mistmach",replId:n,isServices:!0}),e.abrupt("return");case 9:return e.prev=9,e.next=12,s(t.version,t.version);case 12:c=e.sent,f=Object(T.a)(c,1),a=f[0],e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(9),Object(C.track)(C.events.OT_FILE_DATA_LOST,{opType:r,case:"error_fetching_op",e:e.t0.message,replId:n,isServices:!0}),e.abrupt("return");case 21:if(a){e.next=24;break}return Object(C.track)(C.events.OT_FILE_DATA_LOST,{opType:r,case:"op_not_found",replId:n,isServices:!0}),e.abrupt("return");case 24:a.crc32!==t.crc32&&Object(C.track)(C.events.OT_FILE_DATA_LOST,{opType:r,case:"crc32_mismatch",replId:n,isServices:!0});case 25:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(r){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function V(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?W(Object(t),!0).forEach((function(r){Object(n.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function q(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return H(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){function r(r){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(e){throw e})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){function r(r){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(e){c=!0,i=e})),f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function H(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function J(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=Object(y.a)(e);if(r){var o=Object(y.a)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return Object(g.a)(this,t)}}function K(e){return e.map((function(e){if("delete"in e&&e.delete)return{d:e.delete};if("skip"in e&&e.skip)return e.skip;if("insert"in e&&"string"===typeof e.insert)return e.insert;throw new Error("Unexpected op type")}))}var G=function(e){Object(b.a)(t,e);var r=J(t);function t(e,o){var c;return Object(h.a)(this,t),c=r.call(this),Object(n.a)(Object(v.a)(c),"linkedFile",void 0),Object(n.a)(Object(v.a)(c),"channel",void 0),Object(n.a)(Object(v.a)(c),"destroy",void 0),Object(n.a)(Object(v.a)(c),"pending",void 0),Object(n.a)(Object(v.a)(c),"inflight",void 0),Object(n.a)(Object(v.a)(c),"inflightOpsPromise",void 0),Object(n.a)(Object(v.a)(c),"version",void 0),Object(n.a)(Object(v.a)(c),"serverContent",void 0),Object(n.a)(Object(v.a)(c),"localContent",void 0),Object(n.a)(Object(v.a)(c),"pendingCursors",void 0),Object(n.a)(Object(v.a)(c),"flushedCursorIds",void 0),Object(n.a)(Object(v.a)(c),"user",void 0),Object(n.a)(Object(v.a)(c),"debounceSend",void 0),Object(n.a)(Object(v.a)(c),"debounceCommit",void 0),Object(n.a)(Object(v.a)(c),"commitPromise",void 0),Object(n.a)(Object(v.a)(c),"isReconnecting",void 0),Object(n.a)(Object(v.a)(c),"shouldTrackReconnects",void 0),Object(n.a)(Object(v.a)(c),"shouldTrackDataLoss",void 0),Object(n.a)(Object(v.a)(c),"replId",void 0),Object(n.a)(Object(v.a)(c),"uncommittedOps",void 0),Object(n.a)(Object(v.a)(c),"hasUncommittedMultiplayerOps",void 0),Object(n.a)(Object(v.a)(c),"committedVersion",void 0),Object(n.a)(Object(v.a)(c),"committedContent",void 0),Object(n.a)(Object(v.a)(c),"bufferedReconnectingOps",void 0),Object(n.a)(Object(v.a)(c),"didEditOffline",void 0),Object(n.a)(Object(v.a)(c),"reconnectTrackedData",void 0),Object(n.a)(Object(v.a)(c),"timeDisconnected",void 0),Object(n.a)(Object(v.a)(c),"writeOps",(function(e){if(!c.channel&&!c.isReconnecting)throw new Error("Trying to send changes before ever coming online");c.isReconnecting&&(c.didEditOffline=!0);var r,t=c.localContent,n=[],o=0,i=q(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=null;switch(typeof a){case"number":o+=a;break;case"string":var u=Object(E.strPosToUni)(t,o);s=u>0?[u,a]:[a],o+=a.length;break;case"object":var l=Object(E.strPosToUni)(t,o),f=Object(E.strPosToUni)(t,o+a.d)-l;s=l>0?[l,{d:f}]:[{d:f}];break;default:return void c.emit("error",new Error("OT Error: unknown op type"))}s&&(t=O.type.apply(t,s),n=O.type.compose(n,s))}}catch(d){i.e(d)}finally{i.f()}c.pending=O.type.compose(c.pending,n),c.localContent=t,0!==c.pending.length?c.emit("fileDirty"):c.commitPromise&&c.emit("commitStart"),c.debounceSend()})),Object(n.a)(Object(v.a)(c),"updateCursors",(function(e){c.pendingCursors=e,c.debounceSend()})),Object(n.a)(Object(v.a)(c),"isClean",(function(){return c.committedVersion===c.version&&0===c.inflight.length&&0===c.pending.length})),Object(n.a)(Object(v.a)(c),"sendOps",(function(){if(c.channel&&"open"===c.channel.status&&!c.isReconnecting&&!(c.inflight.length>0)){if(0!==c.pending.length){var e=c.pending.map((function(e){return"object"===typeof e?{delete:e.d}:"number"===typeof e?{skip:e}:{insert:e}}));c.inflight=c.pending,c.pending=[],c.inflightOpsPromise=c.channel.request({ot:{spookyVersion:c.version,ops:e}}),c.inflightOpsPromise.then((function(r){r.error&&c.emit("error",new Error("OT Error: error accepting packet"),{originalError:r.error,ops:e})}))}if(0!==c.pendingCursors.length){var r,t=q(c.flushedCursorIds);try{for(t.s();!(r=t.n()).done;){var n=r.value;c.channel.send({otDeleteCursor:{id:n}})}}catch(u){t.e(u)}finally{t.f()}c.flushedCursorIds=[];var o,i=q(c.pendingCursors);try{for(i.s();!(o=i.n()).done;){var a=o.value,s=Number(Math.random().toString().split(".")[1]).toString(36);c.flushedCursorIds.push(s),c.channel.send({otNewCursor:V({id:s,user:c.user},a)})}}catch(u){i.e(u)}finally{i.f()}c.pendingCursors=[]}}})),Object(n.a)(Object(v.a)(c),"handlePacket",(function(e,r){var t=e.ops,n=e.version,o=e.crc32,i=r.overrideReconnectringBuffer;if(!c.isReconnecting||i)if(-1!==c.version)if(c.version++,n===c.version){var a="";try{a=O.type.apply(c.serverContent,t)}catch(y){return void c.emit("error",new Error("OT Error: unable to apply updated content"),{originalError:y,incomingOps:t})}var s=x.str(a)>>>0;if(s===o){if(c.uncommittedOps.push({version:n,crc32:o,ops:t}),c.shouldTrackDataLoss&&M({replId:c.replId,filePath:c.linkedFile,opType:"latestOp",op:{version:n,crc32:o}}),JSON.stringify(t)===JSON.stringify(c.inflight))return c.shouldTrackDataLoss&&M({replId:c.replId,filePath:c.linkedFile,opType:"latestOwnOp",op:{version:n,crc32:o}}),c.debounceCommit(),c.inflight=[],c.inflightOpsPromise=null,c.serverContent=a,c.debounceSend(),void c.debounceSend.flush();if(c.commitPromise||c.emit("fileDirty"),c.debounceCommit(),c.hasUncommittedMultiplayerOps=!0,c.inflight.length){var u=O.type.transform(c.inflight,t,"right");t=O.type.transform(t,c.inflight,"left"),c.inflight=u}if(c.pending.length){var l=O.type.transform(c.pending,t,"right");t=O.type.transform(t,c.pending,"left"),c.pending=l}c.localContent=O.type.apply(c.localContent,t);var f,d=[],p=0,h=q(t);try{for(h.s();!(f=h.n()).done;){var m=f.value;switch(typeof m){case"number":p+=m;break;case"string":var v=Object(E.uniToStrPos)(c.localContent,p);d=v>0?S.a(d,[v,m]):S.a(d,[m]),p+=Object(E.strPosToUni)(m);break;case"object":var b=Object(E.uniToStrPos)(c.localContent,p),g=Object(E.uniToStrPos)(c.localContent,p+m.d)-b;d=b>0?S.a(d,[b,{d:g}]):S.a(d,[{d:g}]);break;default:return void c.emit("error",new Error("OT Error: unknown op type"))}}}catch(w){h.e(w)}finally{h.f()}c.serverContent=a,c.emit("op",d)}else c.emit("error",new Error("OT Error: crc32 mismatch"),{server:o,client:s,incomingOps:t})}else c.emit("error",new Error("OT Error: invalid server version"),{expectedVersion:c.version,receievedVersion:n,incomingOps:t});else c.emit("error",new Error("Got packet while version is still -1, expected version to be set in handleStatus"));else c.bufferedReconnectingOps.push({crc32:o,ops:t,version:n})})),Object(n.a)(Object(v.a)(c),"handleNewCursor",(function(e){c.emit("cursor",e)})),Object(n.a)(Object(v.a)(c),"handleDeleteCursor",(function(e){var r=e.id;c.emit("removeCursor",r)})),Object(n.a)(Object(v.a)(c),"handleStatus",function(){var e=Object(a.a)(i.a.mark((function e(r){var t,n,o,a,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.channel&&"open"===c.channel.status){e.next=2;break}return e.abrupt("return");case 2:if(!r.linkedFile){e.next=25;break}if(null!=r.contents){e.next=6;break}return c.emit("error",new Error("expected status contents,  got null or undefined")),e.abrupt("return");case 6:if(null!=r.cursors){e.next=9;break}return c.emit("error",new Error("expected status cursors, got null or undefined")),e.abrupt("return");case 9:if(null!=r.version){e.next=12;break}return c.emit("error",new Error("expected status version, got null or undefined")),e.abrupt("return");case 12:if(!c.isReconnecting){e.next=15;break}return c.handleReconnect(r.contents,r.version),e.abrupt("return");case 15:return c.shouldTrackDataLoss&&B({serverContent:r.contents,serverVersion:r.version,replId:c.replId,filePath:c.linkedFile,fetchOps:c.fetchOps}),c.serverContent=r.contents,c.localContent=c.serverContent,c.version=r.version,c.emit("firstConnect"),c.emit("op",[c.serverContent]),r.cursors.forEach(c.handleNewCursor),c.emit("fileDirty"),c.debounceCommit(),e.abrupt("return");case 25:return e.next=27,c.channel.request({otLinkFile:{file:{path:c.linkedFile},highConsistency:Boolean(window["flag-ot-high-consitency"])}});case 27:if(!(o=e.sent).channelClosed){e.next=30;break}return e.abrupt("return");case 30:if(!o.error){e.next=33;break}return c.emit("error",new Error("link file error "+o.error)),e.abrupt("return");case 33:if(o.otLinkFileResponse){e.next=36;break}return c.emit("error",new Error("link file error "+JSON.stringify(o.toJSON()))),e.abrupt("return");case 36:if(a=o.otLinkFileResponse.version,u=s.a.from(null!==(t=null===(n=o.otLinkFileResponse.linkedFile)||void 0===n?void 0:n.content)&&void 0!==t?t:"").toString(),l=[u],!c.isReconnecting){e.next=42;break}return c.handleReconnect(u,a),e.abrupt("return");case 42:c.shouldTrackDataLoss&&B({serverContent:u,serverVersion:a,replId:c.replId,filePath:c.linkedFile,fetchOps:c.fetchOps}),c.serverContent=u,c.localContent=c.serverContent,c.version=a,c.committedVersion=a,c.committedContent=c.serverContent,c.emit("firstConnect"),c.emit("op",l);case 50:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),Object(n.a)(Object(v.a)(c),"handleReconnect",function(){var e=Object(a.a)(i.a.mark((function e(r,t){var n,o,a,s,u,l,f,d,p,h,m,v,b,g,y,w,x,j,k,E,S,T,D,P,I,F,R,N,_,A,L;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.timeDisconnected){e.next=2;break}throw new Error("wat");case 2:if(n=Date.now()-c.timeDisconnected,o=function(e){c.reconnectTrackedData=V(V({},e),{},{serverVersion:t,ourVersion:c.version,ourCommittedVersion:c.committedVersion,areContentsEqual:c.serverContent===r,areCommittedContentsEqual:c.committedContent===r,didReceiveOpsWhileReconnecting:Boolean(c.bufferedReconnectingOps),didEditOffline:c.didEditOffline,hasPendingOps:Boolean(c.pending.length),disconnectDuration:n}),c.shouldTrackReconnects&&Object(C.track)(C.events.FILE_RECONNECTED_STATUS2,c.reconnectTrackedData)},a=function(){c.isReconnecting=!1,c.bufferedReconnectingOps=[],c.didEditOffline=!1,c.timeDisconnected=null,c.debounceSend(),c.debounceCommit(),c.emit("reconnected")},!c.inflight.length){e.next=23;break}if(t!==c.version||c.serverContent!==r){e.next=13;break}return o({case:"has_inflight_happy_path_ops_unreached",prompted:!1}),c.pending=O.type.compose(c.inflight,c.pending),c.inflight=[],c.inflightOpsPromise=null,a(),e.abrupt("return");case 13:s=!1,u=c.serverContent;try{u=O.type.apply(r,c.inflight)}catch(i){s=!0}if(s||c.version+1!==t||u!==r){e.next=20;break}return o({case:"has_inflight_happy_path_ops_reached",prompted:!0}),c.emit("promptUserReconnect"),e.abrupt("return");case 20:return o({case:"has_inflight",prompted:!0}),c.emit("promptUserReconnect"),e.abrupt("return");case 23:if(!c.hasUncommittedMultiplayerOps){e.next=27;break}return o({case:"multiplayer",prompted:!0}),c.emit("promptUserReconnect"),e.abrupt("return");case 27:if(c.version!==t){e.next=35;break}if(r!==c.serverContent){e.next=32;break}return o({case:"happy_path",prompted:!1}),a(),e.abrupt("return");case 32:return o({case:"same_version_different_content",prompted:!0}),c.emit("promptUserReconnect"),e.abrupt("return");case 35:if(c.committedVersion!==t){e.next=61;break}l=r,e.prev=37,f=q(c.uncommittedOps);try{for(f.s();!(d=f.n()).done;)p=d.value.ops,l=O.type.apply(l,p)}catch(M){f.e(M)}finally{f.f()}e.next=47;break;case 42:return e.prev=42,e.t0=e.catch(37),o({case:"same_committed_version_unable_to_apply_ops",prompted:!0}),c.emit("promptUserReconnect"),e.abrupt("return");case 47:if(l!==c.serverContent){e.next=58;break}o({case:"happy_path_uncommitted",prompted:!1}),h=[],m=q(c.uncommittedOps);try{for(m.s();!(v=m.n()).done;)b=v.value.ops,h=O.type.compose(h,b)}catch(M){m.e(M)}finally{m.f()}return c.pending=O.type.compose(h,c.pending),c.uncommittedOps=[],c.version=t,c.serverContent=r,a(),e.abrupt("return");case 58:return o({case:"same_committed_version_different_content_fixed",prompted:!0}),c.emit("promptUserReconnect"),e.abrupt("return");case 61:if(!(c.version<t)){e.next=85;break}return e.next=64,c.fetchOps(c.version+1,t);case 64:g=e.sent,y=!1,w=c.serverContent;try{x=q(g);try{for(x.s();!(j=x.n()).done;)k=j.value.ops,w=O.type.apply(w,k)}catch(M){x.e(M)}finally{x.f()}}catch(i){y=!0}if(y||w!==r){e.next=76;break}o({case:"happy_path_server_ahead",prompted:!1}),E=q(g);try{for(E.s();!(S=E.n()).done;)T=S.value,c.handlePacket(T,{overrideReconnectringBuffer:!0})}catch(M){E.e(M)}finally{E.f()}D=q(c.bufferedReconnectingOps);try{for(D.s();!(P=D.n()).done;)I=P.value,c.handlePacket(I,{overrideReconnectringBuffer:!0})}catch(M){D.e(M)}finally{D.f()}return a(),e.abrupt("return");case 76:return e.next=78,c.fetchOps(c.committedVersion+1,t);case 78:F=e.sent,R=!1,N=c.committedContent;try{_=q(F);try{for(_.s();!(A=_.n()).done;)L=A.value.ops,N=O.type.apply(N,L)}catch(M){_.e(M)}finally{_.f()}}catch(i){R=!0}return R||N!==r||o({case:"happy_path_uncommitted_server_ahead",prompted:!0}),c.emit("promptUserReconnect"),e.abrupt("return");case 85:o({case:"other",prompted:!0}),c.emit("promptUserReconnect");case 87:case"end":return e.stop()}}),e,null,[[37,42]])})));return function(r,t){return e.apply(this,arguments)}}()),Object(n.a)(Object(v.a)(c),"flush",Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.commitPromise;case 2:return c.debounceCommit(),c.debounceCommit.flush(),e.next=6,c.commitPromise;case 6:case"end":return e.stop()}}),e)})))),Object(n.a)(Object(v.a)(c),"fetchOps",function(){var e=Object(a.a)(i.a.mark((function e(r,t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.channel){e.next=2;break}throw new Error("No cahnnel, cannot fetch");case 2:return e.next=4,c.channel.request({otFetchRequest:{versionFrom:r,versionTo:t}});case 4:if(!(n=e.sent).channelClosed){e.next=7;break}throw new Error("Channel closed while requesting");case 7:if(!n.error){e.next=9;break}throw new Error("Fetch ops returned an error"+n.error);case 9:if(n.otFetchResponse){e.next=11;break}throw new Error("Expected otFetchResponse");case 11:if(n.otFetchResponse.packets){e.next=13;break}throw new Error("Expected otFetchResponse.packets");case 13:return e.abrupt("return",n.otFetchResponse.packets.map((function(e){var r=e.crc32,t=e.ops,n=e.version;if(null==r)throw new Error("Expected crc32 in packet");if(null==t)throw new Error("Expected ops in packet");if(null==n)throw new Error("Expected version in packet");return{crc32:r,version:n,ops:K(t)}})));case 14:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),Object(n.a)(Object(v.a)(c),"transformSelection",function(){var e=Object(a.a)(i.a.mark((function e(r){var t,n,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.indexStart,n=r.indexEnd,o=r.versionFrom,a=r.versionTo,c.channel){e.next=3;break}throw new Error("No channel, cannot fetch");case 3:return e.next=5,c.channel.request({otTransformSelectionRequest:{indexStart:t,indexEnd:n,versionFrom:o,versionTo:a}});case 5:if((s=e.sent).otTransformSelectionResponse){e.next=8;break}throw new Error("Expected otTransformSelectionResponse");case 8:return e.abrupt("return",s.otTransformSelectionResponse);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),c.shouldTrackDataLoss=!1,c.replId="",c.linkedFile=e,c.channel=null,c.inflight=[],c.inflightOpsPromise=null,c.uncommittedOps=[],c.hasUncommittedMultiplayerOps=!1,c.committedVersion=-1,c.isReconnecting=!1,c.bufferedReconnectingOps=[],c.didEditOffline=!1,c.pending=[],c.version=-1,c.serverContent="",c.localContent="",c.committedContent="",c.flushedCursorIds=[],c.pendingCursors=[],c.user=null,c.debounceSend=k()((function(){return c.sendOps()}),20,{maxWait:60}),c.debounceCommit=k()((function(){return c.commitToDisk()}),1e3,{maxWait:3e3}),c.commitPromise=null,c.timeDisconnected=null,c.shouldTrackReconnects=!1,c.destroy=o.openChannel({service:"ot",name:"ot:".concat(e)},(function(r){if(!r.error){var t=r.channel,n=r.context;return c.user=n.currentUser?{name:n.currentUser.username,id:n.currentUser.id}:null,n.currentUser&&n.repl&&(c.shouldTrackDataLoss=n.currentUser.flagTrackOtClientDataLoss,c.replId=n.repl.id,L(e,c.replId)),c.channel=t,t.onCommand((function(e){switch(e.body){case"ot":if(!e.ot||null==e.ot.ops||null==e.ot.spookyVersion||null==e.ot.crc32)return void c.emit("error",new Error("OT Error: missing data in ot packet"),e.ot||{});if(-1===c.version)return;var r={crc32:e.ot.crc32,ops:K(e.ot.ops),version:e.ot.spookyVersion};return c.handlePacket(r,{overrideReconnectringBuffer:!1});case"otstatus":return c.handleStatus(e.otstatus);case"error":if(e.ref)return;return c.emit("error",new Error("Unkown protocol error OT channel"),{originalError:e.error||"Server error"});case"otNewCursor":return c.handleNewCursor(e.otNewCursor);case"otDeleteCursor":return c.handleDeleteCursor(e.otDeleteCursor)}})),function(){c.channel=null,c.isReconnecting=!0,c.debounceSend.cancel(),c.debounceCommit.cancel(),c.timeDisconnected||(c.timeDisconnected=Date.now())}}})),c}return Object(m.a)(t,[{key:"commitToDisk",value:function(){var e=Object(a.a)(i.a.mark((function e(){var r,t,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.channel){e.next=2;break}throw new Error("Tryna commit while offline");case 2:if("open"===this.channel.status){e.next=4;break}return e.abrupt("return");case 4:if(!this.isReconnecting){e.next=6;break}throw new Error("Committing while reconnecting");case 6:if(!this.isClean()){e.next=8;break}return e.abrupt("return");case 8:if(!this.commitPromise){e.next=11;break}return this.debounceCommit(),e.abrupt("return");case 11:if(r=function(){},this.commitPromise=new Promise((function(e){return r=e})),!this.inflightOpsPromise){e.next=21;break}return e.next=16,this.inflightOpsPromise;case 16:if(!e.sent.channelClosed){e.next=21;break}return this.commitPromise=null,r(),e.abrupt("return");case 21:if(!(this.pending.length>0)){e.next=36;break}if(this.debounceSend(),this.debounceSend.flush(),this.inflightOpsPromise){e.next=29;break}return this.commitPromise=null,r(),this.emit("error",new Error("expected inflight promise")),e.abrupt("return");case 29:return e.next=31,this.inflightOpsPromise;case 31:if(!e.sent.channelClosed){e.next=36;break}return this.commitPromise=null,r(),e.abrupt("return");case 36:return this.emit("commitStart"),t=this.version,n=this.serverContent,e.next=41,this.channel.request({flush:{}});case 41:if(!(o=e.sent).channelClosed){e.next=46;break}return this.commitPromise=null,r(),e.abrupt("return");case 46:if("ok"===o.body){e.next=51;break}return this.commitPromise=null,r(),this.emit("error",new Error("OT Error: unable to flush"),{originalError:o.error||o.toString()}),e.abrupt("return");case 51:return this.shouldTrackDataLoss&&(a=this.uncommittedOps[this.uncommittedOps.length-1])&&M({replId:this.replId,filePath:this.linkedFile,op:{crc32:a.crc32,version:a.version},opType:"latestFlushedOp"}),this.uncommittedOps=[],this.hasUncommittedMultiplayerOps=!1,this.committedVersion=t,this.committedContent=n,this.isClean()&&this.emit("fileClean"),this.commitPromise=null,r(),this.emit("commitComplete"),e.abrupt("return",o);case 61:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(w.EventEmitter),Y=t("tSgl"),Z=t("0gYX"),X=t.n(Z),$=t("gtzJ");function Q(){var e,r,t={promise:new Promise((function(t,n){e=t,r=n})),resolve:function(r){t.isFulfilled=!0,e(r)},reject:function(e){t.isFulfilled=!0,r(e)},isFulfilled:!1};return t}function ee(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function re(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ee(Object(t),!0).forEach((function(r){Object(n.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function te(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return ne(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ne(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function ne(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function oe(e){return!!e.includes("no such file")||!!e.includes("file does not exist")}function ie(e){return oe(e)?u.e.NotFound:e.includes("file exist")?u.e.AlreadyExists:e.includes("not a directory")?u.e.NotDirectory:void 0}function ae(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return new Promise((function(r,n){setTimeout((function(){e.apply(void 0,t).then(r).catch(n)}),0)}))}function ce(e){var r,t=e.container,n=null,o=null,h=null,m=0,v={},b={},g={};t.openChannel({service:"fsevents"},(function(e){var r=e.error,t=e.channel;if(!r){if(!t)throw new Error("Expected channel");n=t,t.onCommand((function(e){if("fileEvent"===e.body){if(!e.fileEvent)throw new Error("Expected fileEvent");var r=e.fileEvent,t=r.file,n=r.dest,o=r.op;if(t){var i=t.path;if(null!==i&&null!==o&&void 0!==i&&void 0!==o){var a;if(F.persist(),v[i]||t.type===p.api.File.Type.DIRECTORY)a=u.d.Directory;else{var c=Object.keys(v).find((function(e){return Object(f.a)(e,i)})),s=c&&v[c].children.find((function(e){return e.filename===Object(l.c)(i)}));a=s?s.type:u.d.File}switch(o){case p.api.FileEvent.Op.Create:T({eventType:u.a.Create,node:{path:i,type:a}});break;case p.api.FileEvent.Op.Modify:if(a===u.d.Directory)break;T({eventType:u.a.Modify,node:{path:i,type:a}});break;case p.api.FileEvent.Op.Remove:T({eventType:u.a.Delete,node:{path:i,type:a}});break;case p.api.FileEvent.Op.Move:if(null==n||null==n.path)throw new Error("Expected dest path");var d=n.path;T({eventType:u.a.Move,node:{path:i,type:a},to:d})}}}}}));var o=Object(c.a)(new Set([].concat(Object(c.a)(Object.keys(v)),Object(c.a)(Object.keys(b)),Object(c.a)(Object.keys(g)))));return o.length&&t.send({subscribeFile:{files:o.map((function(e){return{path:e}}))}}),function(){n=null}}}));var y=new Promise((function(e){return r=e}));t.openChannel({service:function(e){return e.repl.currentUserPermissions.containerWrite?"gcsfiles":"files"}},(function(e){var t=e.error,n=e.channel;if(!t){if(!n)throw new Error("Expected channel");return r(n),function(){y=new Promise((function(e){return r=e}))}}}));var w=Q();w.promise.catch((function(e){return e}));var O=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wait:0},t=null,n=null,o=null,i=null;if(r.wait<0)throw new Error("wait must be 0 or more");if(r.maxWait){if(r.maxWait<0)throw new Error("maxWait must be 0 or more");if(r.maxWait<r.wait)throw new Error("maxWait must be higher than wait")}function a(){if(!r.maxWait)return r.wait;if(!o)throw new Error("Expected scheduledAt to be a set when getting wait");var e=Date.now()-o;return Math.min(r.maxWait-e,r.wait)}function s(){n&&clearTimeout(n),n=null,i=null,t=null,o=null}function u(){if(!t||!n)throw new Error("Expected to call debounced function once before flushing");var r=t,o=i;return s(),e.apply(void 0,Object(c.a)(o)).then((function(e){return r.resolve(e),e})).catch((function(e){throw r.reject(e),e}))}function l(){if(!n||!t)throw new Error("Expected to call debounced function once before cancelling");var e=t;s(),e.reject(new Error("Debounced function cancelled"))}return Object.assign((function(){if(t){if(!n)throw new Error("Did not expect to have deferred and no timeout");clearTimeout(n)}else t=Q(),o=Date.now();for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return i=r,n=window.setTimeout((function(){u()}),a()),t.promise}),{cancel:l,flush:u})}(Object(a.a)(i.a.mark((function e(){var r,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.promise;case 2:return r=e.sent,e.next=5,r.request({fsSnapshot:{}});case 5:if(!(t=e.sent).channelClosed){e.next=8;break}return e.abrupt("return",{success:!1,error:"channel closed"});case 8:if(!t.error){e.next=10;break}return e.abrupt("return",{success:!1,error:t.error});case 10:return e.abrupt("return",{success:!0});case 11:case"end":return e.stop()}}),e)}))),{wait:5e3,maxWait:1e4});t.openChannel({service:"snapshot",skip:function(e){return!e.repl.currentUserPermissions.containerWrite}},(function(e){var r=e.error,t=e.channel;if(!r){if(!t)throw new Error("Expected channel");return w.resolve(t),function(){w.isFulfilled&&(w=Q()).promise.catch((function(e){return e}))}}w.isFulfilled||w.reject(r)}));var j=[];function k(e){return E.apply(this,arguments)}function E(){return(E=Object(a.a)(i.a.mark((function e(r){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=function(){var e=Object(a.a)(i.a.mark((function e(){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y;case 2:return n=e.sent,e.next=5,n.request(r);case 5:if(!(o=e.sent).channelClosed){e.next=8;break}return e.abrupt("return",ae(t));case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),j.push(n),n.then((function(){j=j.filter((function(e){return e!==n}))})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){h=null;var r=e.node.path.includes("/")?Object(l.e)(e.node.path):d.a,t=v[r],n=Object(l.c)(e.node.path);if(!n)throw new Error("Expected filename");var o=null;if(e.eventType===u.a.Move){var i=e.to.includes("/")?Object(l.e)(e.to):d.a;o=v[i]}if(t||o)switch(e.eventType){case u.a.Create:var a,s=[].concat(Object(c.a)(t.children.filter((function(e){return e.filename!==n}))),[{type:e.node.type,filename:n}]),p=te(t.listeners);try{for(p.s();!(a=p.n()).done;){(0,a.value.onChange)(s)}}catch(K){p.e(K)}finally{p.f()}t.children=s;break;case u.a.Move:var m=Object(l.c)(e.to);if(t===o){var y,w=[].concat(Object(c.a)(t.children.filter((function(e){return e.filename!==n&&e.filename!==m}))),[{type:e.node.type,filename:m}]),x=te(t.listeners);try{for(x.s();!(y=x.n()).done;){(0,y.value.onChange)(w)}}catch(K){x.e(K)}finally{x.f()}t.children=w;break}if(t){var O,j=t.children.filter((function(e){return e.filename!==n})),k=te(t.listeners);try{for(k.s();!(O=k.n()).done;){(0,O.value.onChange)(j)}}catch(K){k.e(K)}finally{k.f()}t.children=j}if(o){var E,C=[].concat(Object(c.a)(o.children.filter((function(e){return e.filename!==n&&e.filename!==m}))),[{type:e.node.type,filename:m}]),S=te(o.listeners);try{for(S.s();!(E=S.n()).done;){(0,E.value.onChange)(C)}}catch(K){S.e(K)}finally{S.f()}o.children=C}break;case u.a.Delete:var D,P=t.children.filter((function(e){return e.filename!==n})),I=te(t.listeners);try{for(I.s();!(D=I.n()).done;){(0,D.value.onChange)(P)}}catch(K){I.e(K)}finally{I.f()}t.children=P;break;case u.a.Modify:break;default:throw new Error("unknown event")}switch(e.eventType){case u.a.Move:case u.a.Delete:for(var R=0,N=[b[e.node.path],g[e.node.path],v[e.node.path]];R<N.length;R++){var _=N[R];if(_){var A,L=te(_.listeners);try{for(L.s();!(A=L.n()).done;){var M=A.value,U=M.onMoveOrDelete,B=M.dispose;U&&U(e),B()}}catch(K){L.e(K)}finally{L.f()}}}if(e.node.type===u.d.File)break;var z,W=[],V=te(Object.values(re(re(re({},v),g),b)).sort());try{for(V.s();!(z=V.n()).done;){var q=z.value;if(Object(f.b)(e.node.path,q.path)){var H=W.slice(-1)[0];if(!H||!Object(f.b)(H,q.path)){var J={eventType:u.a.Delete,node:{path:q.path,type:q.type}};e.eventType===u.a.Move&&(J=re(re({},J),{},{eventType:u.a.Move,to:Object(f.d)(e.node.path,e.to,q.path)})),W.push(q.path),T(J)}}}}catch(K){V.e(K)}finally{V.f()}break;case u.a.Create:case u.a.Modify:if(!g[e.node.path])break;F.readFile(e.node.path).then((function(r){var t=g[e.node.path];if(t)if(r.error)T({eventType:u.a.Delete,node:{path:e.node.path,type:u.d.File}});else{var n,o=te(t.listeners);try{for(o.s();!(n=o.n()).done;){var i=n.value.onChange;i&&i(r.content)}}catch(K){o.e(K)}finally{o.f()}}})).catch((function(e){e.message="File read after modify error: "+e.message,$.c(e)}))}}function D(){return P.apply(this,arguments)}function P(){return(P=Object(a.a)(i.a.mark((function e(){var r,n,o,a,s,u,l,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.performance.now(),e.next=3,t.exec.apply(t,["ag","--noaffinity","-g *","--hidden"].concat(Object(c.a)(Y.ignoredDirs.map((function(e){return"--ignore=".concat(e)})))));case 3:if(o=e.sent,a=o.output,s=o.error,Object(C.track)(C.events.LIST_FILES_EXECUTED,{duration:window.performance.now()-n,failed:Boolean(s)&&"exit status 1"!==s}),u=null===(r=t.getContext())||void 0===r?void 0:r.repl){e.next=10;break}throw new Error("Expected repl");case 10:if(l=function(e){return!!e&&(!Object(Y.isHiddenFile)(e)&&!X.a.isLangFileBinary(u.language,e))},s||!a){e.next=14;break}return h={error:null,files:a.split("\n").filter(l)},e.abrupt("return",h);case 14:if(!s||!s.includes("not found")){e.next=22;break}return e.next=17,t.exec("find",".","-type","f","-print0");case 17:if(f=e.sent,Object(C.track)(C.events.AG_NOT_AVAILABLE,{language:u.language}),!f.output){e.next=22;break}return h={error:null,files:f.output.slice(2,-1).split("\0./").filter(l)},e.abrupt("return",h);case 22:return"exit status 1"!==s&&$.c(new Error("Find file command failed with error: ".concat(s))),e.abrupt("return",{error:s,files:null});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){var e=Object(a.a)(i.a.mark((function e(r,t,n){var o,c,s,l,f,d,p,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=Object(a.a)(i.a.mark((function e(r){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.request(r);case 2:if(!(t=e.sent).channelClosed){e.next=5;break}throw new Error("channelClosed");case 5:if(!t.error){e.next=7;break}throw new Error(t.error);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e){return s.apply(this,arguments)},e.next=4,y;case 4:return o=e.sent,e.prev=5,e.next=8,c({transferStart:{path:r,size:t.length}});case 8:if(l=e.sent,f=l.transfer){e.next=12;break}throw new Error("Failed to start a transfer (no transfer id)");case 12:d=t.toBuffer(),p=512e3,n(d.length,0),h=0;case 16:if(!(h<Math.ceil(t.length/p))){e.next=23;break}return e.next=19,c({transferChunk:{id:f.id,content:d.subarray(h*p,(h+1)*p)}});case 19:n(d.length,Math.min(d.length,(h+1)*p));case 20:h++,e.next=16;break;case 23:return e.next=25,c({transferComplete:{id:f.id,crc32:x.buf(d)}});case 25:e.next=36;break;case 27:if(e.prev=27,e.t0=e.catch(5),"channelClosed"!==e.t0.message){e.next=31;break}return e.abrupt("return",ae(F.transferFile,r,t,n));case 31:if(!e.t0.message.includes("not a directory")){e.next=33;break}return e.abrupt("return",{error:u.e.NotDirectory});case 33:if(!e.t0.message.includes("file exists")){e.next=35;break}return e.abrupt("return",{error:u.e.IsDirectory});case 35:throw e.t0;case 36:return F.persist(),T({eventType:u.a.Create,node:{path:r,type:u.d.File}}),e.abrupt("return",{error:null});case 39:case"end":return e.stop()}}),e,null,[[5,27]])})));return function(r,t,n){return e.apply(this,arguments)}}(),F={watchDir:function(e,r){var t=!1,o=function r(){t=!0,v[e]&&(v[e].listeners=v[e].listeners.filter((function(e){return e.dispose!==r})),0===v[e].listeners.length&&delete v[e])};return F.readDir(e).then((function(i){if(!t){if(i.error){var a=new Error(i.error);return a.code=i.error,r.onError(a),void o()}v[e]||(v[e]={path:e,type:u.d.Directory,children:i.children,listeners:[]},n&&n.send({subscribeFile:{files:[{path:e}]}})),v[e].listeners.push(re(re({},r),{},{dispose:o})),r.onChange(i.children)}})).catch((function(e){o(),r.onError(e)})),o},writeFile:function(e,r){return Object(a.a)(i.a.mark((function t(){var n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k({write:{path:e,content:r.toBuffer()}});case 2:if(!(n=t.sent).error){t.next=9;break}if(o=null,n.error.includes("not a directory")?o=u.e.NotDirectory:n.error.includes("file exists")&&(o=u.e.IsDirectory),o){t.next=8;break}throw new Error(n.error);case 8:return t.abrupt("return",{error:o});case 9:return F.persist(),g[e]||b[e]||v[Object(l.e)(e)]&&v[Object(l.e)(e)].children.some((function(r){return r.filename===Object(l.c)(e)}))?T({eventType:u.a.Modify,node:{path:e,type:u.d.File}}):T({eventType:u.a.Create,node:{path:e,type:u.d.File}}),t.abrupt("return",{error:null});case 12:case"end":return t.stop()}}),t)})))()},transferFile:function(){var e=arguments;return Object(a.a)(i.a.mark((function r(){var t;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=I.apply(void 0,Object(c.a)(e)),j.push(t),r.abrupt("return",t);case 3:case"end":return r.stop()}}),r)})))()},readFile:function(e){return Object(a.a)(i.a.mark((function r(){var t,n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k({read:{path:e}});case 2:if(!(t=r.sent).error){r.next=9;break}if(n=null,oe(t.error)?n=u.e.NotFound:t.error.includes("is a directory")&&(n=u.e.IsDirectory),n){r.next=8;break}throw new Error(t.error);case 8:return r.abrupt("return",{error:n});case 9:if(t.file&&t.file.path&&t.file.content){r.next=11;break}throw new Error("Expected file");case 11:return r.abrupt("return",{content:s.a.from(t.file.content),error:null});case 12:case"end":return r.stop()}}),r)})))()},createDir:function(e){return Object(a.a)(i.a.mark((function r(){var t,n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k({mkdir:{path:e}});case 2:if(!(t=r.sent).error){r.next=9;break}if(n=null,t.error.includes("not a directory")&&(n=u.e.NotDirectory),n){r.next=8;break}throw new Error(t.error);case 8:return r.abrupt("return",{error:n});case 9:return F.persist(),T({eventType:u.a.Create,node:{path:e,type:u.d.Directory}}),r.abrupt("return",{error:null});case 12:case"end":return r.stop()}}),r)})))()},moveDir:function(e,r){return Object(a.a)(i.a.mark((function t(){var n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k({move:{oldPath:e,newPath:r}});case 2:if(!(n=t.sent).error){t.next=8;break}if(o=ie(n.error)){t.next=7;break}throw new Error(n.error);case 7:return t.abrupt("return",{error:o});case 8:return F.persist(),T({eventType:u.a.Move,node:{path:e,type:u.d.Directory},to:r}),t.abrupt("return",{error:null});case 11:case"end":return t.stop()}}),t)})))()},moveFile:function(e,r){return Object(a.a)(i.a.mark((function t(){var n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k({move:{oldPath:e,newPath:r}});case 2:if(!(n=t.sent).error){t.next=8;break}if(o=ie(n.error)){t.next=7;break}throw new Error(n.error);case 7:return t.abrupt("return",{error:o});case 8:return F.persist(),T({eventType:u.a.Move,node:{path:e,type:u.d.File},to:r}),t.abrupt("return",{error:null});case 11:case"end":return t.stop()}}),t)})))()},deleteFile:function(e){return Object(a.a)(i.a.mark((function r(){var t,n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k({remove:{path:e}});case 2:if(!(t=r.sent).error){r.next=9;break}if(n=null,oe(t.error)&&(n=u.e.NotFound),n){r.next=8;break}throw new Error(t.error);case 8:return r.abrupt("return",{error:n});case 9:return F.persist(),T({eventType:u.a.Delete,node:{path:e,type:u.d.File}}),r.abrupt("return",{error:null});case 12:case"end":return r.stop()}}),r)})))()},deleteDir:function(e){return Object(a.a)(i.a.mark((function r(){var t,n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k({remove:{path:e}});case 2:if(!(t=r.sent).error){r.next=9;break}if(n=null,oe(t.error)&&(n=u.e.NotFound),n){r.next=8;break}throw new Error(t.error);case 8:return r.abrupt("return",{error:n});case 9:return F.persist(),T({eventType:u.a.Delete,node:{path:e,type:u.d.Directory}}),r.abrupt("return",{error:null});case 12:case"end":return r.stop()}}),r)})))()},readDir:function(e){return Object(a.a)(i.a.mark((function r(){var t,n,o,a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k({readdir:{path:e}});case 2:if(!(n=r.sent).error){r.next=9;break}if(o=null,oe(n.error)?o=u.e.NotFound:n.error.includes("not a directory")&&(o=u.e.NotDirectory),o){r.next=8;break}throw new Error(n.error);case 8:return r.abrupt("return",{error:o});case 9:if(null!==(t=n.files)&&void 0!==t&&t.files){r.next=11;break}throw new Error("Expected filesChannel");case 11:return a=n.files.files.map((function(e){if(!e.path)throw new Error("Expected path");return{filename:e.path,type:e.type===p.api.File.Type.DIRECTORY?u.d.Directory:u.d.File}})),r.abrupt("return",{children:a,error:null});case 13:case"end":return r.stop()}}),r)})))()},stat:function(e){return Object(a.a)(i.a.mark((function r(){var t;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k({stat:{path:e}});case 2:if(!(t=r.sent).error){r.next=5;break}throw new Error(t.error);case 5:if(t.statRes){r.next=7;break}throw new Error("expected stat result");case 7:if(t.statRes.exists){r.next=9;break}return r.abrupt("return",{exists:!1});case 9:if(t.statRes.type!==p.api.File.Type.DIRECTORY){r.next=11;break}return r.abrupt("return",{exists:!0,type:u.d.Directory,lastModified:new Date(1e3*t.statRes.modTime)});case 11:return r.abrupt("return",{exists:!0,type:u.d.File,lastModified:new Date(1e3*t.statRes.modTime),byteLength:Number(t.statRes.size)});case 12:case"end":return r.stop()}}),r)})))()},watchOtFile:function(e,r,n){var o=this;b[e]||(b[e]={path:e,type:u.d.File,listeners:[],otClient:new G(e,t)}),n&&(b[e].otClient.shouldTrackReconnects=!0);var c=!1,l=function(){},f=function f(p){l();var h=function(){var e;return null===(e=r.onStatusChange)||void 0===e?void 0:e.call(r,u.c.Dirty)};b[e].otClient.on("fileDirty",h);var m=function(){var e;return null===(e=r.onStatusChange)||void 0===e?void 0:e.call(r,u.c.Clean)};b[e].otClient.on("fileClean",m);var v=function(){var e;return null===(e=r.onStatusChange)||void 0===e?void 0:e.call(r,u.c.Syncing)};b[e].otClient.on("commitStart",v),b[e].otClient.on("commitComplete",(function(){return F.persist()}));var g=function(e){var t;return null===(t=r.onCursor)||void 0===t?void 0:t.call(r,e)};b[e].otClient.on("cursor",g);var y=function(e){var t;return null===(t=r.onRemoveCursor)||void 0===t?void 0:t.call(r,e)};b[e].otClient.on("removeCursor",y);var w=function(){var r=Object(a.a)(i.a.mark((function r(a){var c,u,l,f,d,p,h;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((c=b[e].otClient).destroy(),u=function(){var r=new G(e,t);return n&&(r.shouldTrackReconnects=!0),new Promise((function(t,n){r.once("op",(function(){var n=c.localContent,o=r.localContent,i=Object(S.b)(n,o);b[e].otClient=r;var a,s=te(b[e].listeners);try{for(s.s();!(a=s.n()).done;){(0,a.value.reregister)(i)}}catch(u){s.e(u)}finally{s.f()}t()})),r.once("error",(function(e){return n(e)}))}))},"remote"!==a){r.next=7;break}return r.next=6,u();case 6:return r.abrupt("return");case 7:return r.next=9,o.writeFile(e,s.a.from(c.localContent));case 9:if(!(l=r.sent).error){r.next=16;break}(f=new Error("Got error while overwriting file during reconnect")).code=l.error,d=te(b[e].listeners);try{for(d.s();!(p=d.n()).done;)(h=p.value).onError&&h.onError(f),h.dispose()}catch(i){d.e(i)}finally{d.f()}return r.abrupt("return");case 16:return r.next=18,u();case 18:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),x=function(){var e;return null===(e=r.onReconnectFail)||void 0===e?void 0:e.call(r,w)};b[e].otClient.on("promptUserReconnect",x),b[e].listeners[0].reregister===f&&b[e].otClient.on("promptUserReconnect",(function(){b[e]&&(b[e].listeners.some((function(e){return e.onReconnectFail}))||w("remote"))}));var O=function(e){r.onError&&r.onError(e),d()};b[e].otClient.on("error",O);var j,k=function(t){b[e].otClient.writeOps(t);var n,o=te(b[e].listeners);try{for(o.s();!(n=o.n()).done;){var i=n.value.onChange;i&&i!==r.onChange&&i({ops:t,changeSource:u.b.Local,version:b[e].otClient.version,latestContent:b[e].otClient.localContent})}}catch(a){o.e(a)}finally{o.f()}},E=function(r){b[e].otClient.updateCursors(r)};(-1!==b[e].otClient.version&&setTimeout((function(){var t;c||null===(t=r.onReady)||void 0===t||t.call(r,{initialContent:s.a.from(b[e].otClient.localContent),writeOps:k,updateSelections:E,fetchOps:b[e].otClient.fetchOps,transformSelection:b[e].otClient.transformSelection,version:b[e].otClient.version})})),p)&&(null===(j=r.onChange)||void 0===j||j.call(r,{ops:p,changeSource:u.b.Container,version:b[e].otClient.version,latestContent:b[e].otClient.localContent}));var C=function(t){var n,o;if(!c)return c=!0,void(null===(o=r.onReady)||void 0===o||o.call(r,{initialContent:s.a.from(b[e].otClient.localContent),writeOps:k,updateSelections:E,fetchOps:b[e].otClient.fetchOps,transformSelection:b[e].otClient.transformSelection,version:b[e].otClient.version}));null===(n=r.onChange)||void 0===n||n.call(r,{ops:t,changeSource:u.b.Container,version:b[e].otClient.version,latestContent:b[e].otClient.localContent})};b[e].otClient.on("op",C),l=function(){b[e].otClient.removeListener("fileDirty",h),b[e].otClient.removeListener("fileClean",m),b[e].otClient.removeListener("commitStart",v),b[e].otClient.removeListener("error",O),b[e].otClient.removeListener("op",C),b[e].otClient.removeListener("cursor",g),b[e].otClient.removeListener("removeCursor",y),b[e].otClient.removeListener("promptUserReconnect",x)}},d=function r(){b[e]&&(c=!0,l(),b[e].listeners=b[e].listeners.filter((function(e){return e.dispose!==r})),0===b[e].listeners.length&&(b[e].otClient.destroy(),delete b[e]))};return b[e].listeners.push(re(re({},r),{},{dispose:d,reregister:f})),f(),d},watchFile:function(e,r){var t=!1,o=function r(){t=!0,g[e]&&(g[e].listeners=g[e].listeners.filter((function(e){return e.dispose!==r})),0===g[e].listeners.length&&delete g[e])};return F.readFile(e).then((function(i){if(!t){if(i.error){var a=new Error(i.error);return a.code=i.error,r.onError(a),void o()}g[e]||(g[e]={path:e,type:u.d.File,listeners:[]},n&&n.send({subscribeFile:{files:[{path:e}]}})),g[e].listeners.push(re(re({},r),{},{dispose:o})),r.onChange(i.content)}})),o},listFiles:function(){return Object(a.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(h&&window.performance.now()-m<1e4)){e.next=2;break}return e.abrupt("return",h);case 2:return o||(o=D(),m=window.performance.now()),e.next=5,o;case 5:return r=e.sent,o=null,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))()},flush:function(){for(var e=[],r=0,t=Object.values(b);r<t.length;r++){var n=t[r];e.push(n.otClient.flush())}return Promise.all([].concat(e,Object(c.a)(j)).map((function(e){return e.catch((function(){}))}))).then((function(){}))},persist:function(e){var r=O();return e&&e.skipDebounce&&O.flush(),r}};return F}},VZNv:function(e,r,t){"use strict";t.d(r,"a",(function(){return d}));var n=t("vJKn"),o=t.n(n),i=t("rg98"),a=t("0gYX"),c=t.n(a),s=t("5/z4"),u=t("HADy"),l=t("Fz/E"),f=t("6bXu");function d(e){var r=e.container,t=e.beforeRun,n=Object(l.a)(),a=null,d=u.b.OFFLINE,p="none",h=!1,m=Math.random();function v(){var e=function(e){d!==e&&(d=e,n.emit(u.a.STATE_CHANGE,d))};e(a?h?u.b.STOPPING:"none"===p?u.b.IDLE:u.b.RUNNING:u.b.OFFLINE)}function b(){return(b=Object(i.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d===u.b.IDLE){e.next=2;break}throw new Error("Cannot run while state is not IDLE, got state: "+d);case 2:return r=Math.random(),m=r,p="before-run",v(),e.next=8,t();case 8:if(m===r){e.next=10;break}return e.abrupt("return");case 10:if("none"!==p){e.next=12;break}return e.abrupt("return");case 12:if("server"!==p){e.next=14;break}return e.abrupt("return");case 14:if(a){e.next=16;break}throw new Error("State is RUNNING but shellrunner is null?");case 16:p="optimistic",a.send({runMain:{}});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(i.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d===u.b.IDLE||d===u.b.RUNNING){e.next=2;break}throw new Error("Can only send input when running or idle");case 2:if(a){e.next=4;break}throw new Error("State is not OFFLINE but shellrunner is null?");case 4:a.send({input:r});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.openChannel({name:"shellrunner",service:"shellrun2",skip:function(e){var r,t=e.repl;return!Object(f.a)()||(r=t.language,!(!0===c.a.usesInterpreter(r)||!1!==c.a.usesRunProject(r)))}},(function(e){var r=e.channel;if(!e.error){if(!r)throw new Error("Expected error");return a=r,v(),r.onCommand((function(e){switch(e.body){case"state":var r=e.state===s.api.State.Stopped;h&&r&&(h=!1),r?"server"===p&&(p="none"):p="server",v();break;case"output":n.emit(u.a.OUTPUT,e.output)}})),function(){p="none",h=!1,a=null,v()}}})),{run:function(){return b.apply(this,arguments)},stopRun:function(){if(d!==u.b.RUNNING)throw new Error("stopRun must be called when running but got ".concat(d));if(!a)throw new Error("State is RUNNING but shellrunner is null?");if("before-run"===p)return p="none",void v();p="none",h=!0,v(),a.send({clear:{}})},sendInput:function(e){return g.apply(this,arguments)},resizeTerminal:function(e){if(!a)throw new Error("resizeTerminal must be called when online");a.send({resizeTerm:e})},onOutput:function(e){return n.on(u.a.OUTPUT,e),function(){n.removeListener(u.a.OUTPUT,e)}},onStateChanged:function(e){return n.on(u.a.STATE_CHANGE,e),function(){n.removeListener(u.a.STATE_CHANGE,e)}},getRunState:function(){return d}}}},Yk1I:function(e,r){var t=-1;function n(e,r,s,u){if(e===r)return e?[[0,e]]:[];if(null!=s){var l=function(e,r,t){var n="number"===typeof t?{index:t,length:0}:t.oldRange,o="number"===typeof t?null:t.newRange,i=e.length,a=r.length;if(0===n.length&&(null===o||0===o.length)){var c=n.index,s=e.slice(0,c),u=e.slice(c),l=o?o.index:null,f=c+a-i;if((null===l||l===f)&&!(f<0||f>a)){var p=r.slice(0,f);if((v=r.slice(f))===u){var h=Math.min(c,f);if((g=s.slice(0,h))===(w=p.slice(0,h)))return d(g,s.slice(h),p.slice(h),u)}}if(null===l||l===c){var m=c,v=(p=r.slice(0,m),r.slice(m));if(p===s){var b=Math.min(i-m,a-m);if((y=u.slice(u.length-b))===(x=v.slice(v.length-b)))return d(s,u.slice(0,u.length-b),v.slice(0,v.length-b),y)}}}if(n.length>0&&o&&0===o.length){var g=e.slice(0,n.index),y=e.slice(n.index+n.length);if(!(a<(h=g.length)+(b=y.length))){var w=r.slice(0,h),x=r.slice(a-b);if(g===w&&y===x)return d(g,e.slice(h,i-b),r.slice(h,a-b),y)}}return null}(e,r,s);if(l)return l}var f=i(e,r),p=e.substring(0,f);f=a(e=e.substring(f),r=r.substring(f));var h=e.substring(e.length-f),m=function(e,r){var c;if(!e)return[[1,r]];if(!r)return[[t,e]];var s=e.length>r.length?e:r,u=e.length>r.length?r:e,l=s.indexOf(u);if(-1!==l)return c=[[1,s.substring(0,l)],[0,u],[1,s.substring(l+u.length)]],e.length>r.length&&(c[0][0]=c[2][0]=t),c;if(1===u.length)return[[t,e],[1,r]];var f=function(e,r){var t=e.length>r.length?e:r,n=e.length>r.length?r:e;if(t.length<4||2*n.length<t.length)return null;function o(e,r,t){for(var n,o,c,s,u=e.substring(t,t+Math.floor(e.length/4)),l=-1,f="";-1!==(l=r.indexOf(u,l+1));){var d=i(e.substring(t),r.substring(l)),p=a(e.substring(0,t),r.substring(0,l));f.length<p+d&&(f=r.substring(l-p,l)+r.substring(l,l+d),n=e.substring(0,t-p),o=e.substring(t+d),c=r.substring(0,l-p),s=r.substring(l+d))}return 2*f.length>=e.length?[n,o,c,s,f]:null}var c,s,u,l,f,d=o(t,n,Math.ceil(t.length/4)),p=o(t,n,Math.ceil(t.length/2));if(!d&&!p)return null;c=p?d&&d[4].length>p[4].length?d:p:d;e.length>r.length?(s=c[0],u=c[1],l=c[2],f=c[3]):(l=c[0],f=c[1],s=c[2],u=c[3]);var h=c[4];return[s,u,l,f,h]}(e,r);if(f){var d=f[0],p=f[1],h=f[2],m=f[3],v=f[4],b=n(d,h),g=n(p,m);return b.concat([[0,v]],g)}return function(e,r){for(var n=e.length,i=r.length,a=Math.ceil((n+i)/2),c=a,s=2*a,u=new Array(s),l=new Array(s),f=0;f<s;f++)u[f]=-1,l[f]=-1;u[c+1]=0,l[c+1]=0;for(var d=n-i,p=d%2!==0,h=0,m=0,v=0,b=0,g=0;g<a;g++){for(var y=-g+h;y<=g-m;y+=2){for(var w=c+y,x=(C=y===-g||y!==g&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-y;C<n&&x<i&&e.charAt(C)===r.charAt(x);)C++,x++;if(u[w]=C,C>n)m+=2;else if(x>i)h+=2;else if(p){if((k=c+d-y)>=0&&k<s&&-1!==l[k])if(C>=(j=n-l[k]))return o(e,r,C,x)}}for(var O=-g+v;O<=g-b;O+=2){for(var j,k=c+O,E=(j=O===-g||O!==g&&l[k-1]<l[k+1]?l[k+1]:l[k-1]+1)-O;j<n&&E<i&&e.charAt(n-j-1)===r.charAt(i-E-1);)j++,E++;if(l[k]=j,j>n)b+=2;else if(E>i)v+=2;else if(!p){if((w=c+d-O)>=0&&w<s&&-1!==u[w]){var C;x=c+(C=u[w])-w;if(C>=(j=n-j))return o(e,r,C,x)}}}}return[[t,e],[1,r]]}(e,r)}(e=e.substring(0,e.length-f),r=r.substring(0,r.length-f));return p&&m.unshift([0,p]),h&&m.push([0,h]),c(m,u),m}function o(e,r,t,o){var i=e.substring(0,t),a=r.substring(0,o),c=e.substring(t),s=r.substring(o),u=n(i,a),l=n(c,s);return u.concat(l)}function i(e,r){if(!e||!r||e.charAt(0)!==r.charAt(0))return 0;for(var t=0,n=Math.min(e.length,r.length),o=n,i=0;t<o;)e.substring(i,o)==r.substring(i,o)?i=t=o:n=o,o=Math.floor((n-t)/2+t);return s(e.charCodeAt(o-1))&&o--,o}function a(e,r){if(!e||!r||e.slice(-1)!==r.slice(-1))return 0;for(var t=0,n=Math.min(e.length,r.length),o=n,i=0;t<o;)e.substring(e.length-o,e.length-i)==r.substring(r.length-o,r.length-i)?i=t=o:n=o,o=Math.floor((n-t)/2+t);return u(e.charCodeAt(e.length-o))&&o--,o}function c(e,r){e.push([0,""]);for(var n,o=0,s=0,u=0,d="",p="";o<e.length;)if(o<e.length-1&&!e[o][1])e.splice(o,1);else switch(e[o][0]){case 1:u++,p+=e[o][1],o++;break;case t:s++,d+=e[o][1],o++;break;case 0:var h=o-u-s-1;if(r){if(h>=0&&f(e[h][1])){var m=e[h][1].slice(-1);if(e[h][1]=e[h][1].slice(0,-1),d=m+d,p=m+p,!e[h][1]){e.splice(h,1),o--;var v=h-1;e[v]&&1===e[v][0]&&(u++,p=e[v][1]+p,v--),e[v]&&e[v][0]===t&&(s++,d=e[v][1]+d,v--),h=v}}if(l(e[o][1])){m=e[o][1].charAt(0);e[o][1]=e[o][1].slice(1),d+=m,p+=m}}if(o<e.length-1&&!e[o][1]){e.splice(o,1);break}if(d.length>0||p.length>0){d.length>0&&p.length>0&&(0!==(n=i(p,d))&&(h>=0?e[h][1]+=p.substring(0,n):(e.splice(0,0,[0,p.substring(0,n)]),o++),p=p.substring(n),d=d.substring(n)),0!==(n=a(p,d))&&(e[o][1]=p.substring(p.length-n)+e[o][1],p=p.substring(0,p.length-n),d=d.substring(0,d.length-n)));var b=u+s;0===d.length&&0===p.length?(e.splice(o-b,b),o-=b):0===d.length?(e.splice(o-b,b,[1,p]),o=o-b+1):0===p.length?(e.splice(o-b,b,[t,d]),o=o-b+1):(e.splice(o-b,b,[t,d],[1,p]),o=o-b+2)}0!==o&&0===e[o-1][0]?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,u=0,s=0,d="",p=""}""===e[e.length-1][1]&&e.pop();var g=!1;for(o=1;o<e.length-1;)0===e[o-1][0]&&0===e[o+1][0]&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)===e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),g=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),g=!0)),o++;g&&c(e,r)}function s(e){return e>=55296&&e<=56319}function u(e){return e>=56320&&e<=57343}function l(e){return u(e.charCodeAt(0))}function f(e){return s(e.charCodeAt(e.length-1))}function d(e,r,n,o){return f(e)||l(o)?null:function(e){for(var r=[],t=0;t<e.length;t++)e[t][1].length>0&&r.push(e[t]);return r}([[0,e],[t,r],[1,n],[0,o]])}function p(e,r,t){return n(e,r,t,!0)}p.INSERT=1,p.DELETE=t,p.EQUAL=0,e.exports=p},Z5Wq:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.strPosToUni=function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,t=0,n=0;n<r;n++){var o=e.charCodeAt(n);o>=55296&&o<=57343&&(t++,n++)}if(n!==r)throw Error("Invalid offset - splits unicode bytes");return n-t},r.uniToStrPos=function(e,r){for(var t=0;r>0;r--){var n=e.charCodeAt(t);t+=n>=55296&&n<=57343?2:1}return t}},cC09:function(e,r,t){var n;n=function(e){e.version="1.2.0";var r=function(){for(var e=0,r=new Array(256),t=0;256!=t;++t)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=t)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,r[t]=e;return"undefined"!==typeof Int32Array?new Int32Array(r):r}();e.table=r,e.bstr=function(e,t){for(var n=-1^t,o=e.length-1,i=0;i<o;)n=(n=n>>>8^r[255&(n^e.charCodeAt(i++))])>>>8^r[255&(n^e.charCodeAt(i++))];return i===o&&(n=n>>>8^r[255&(n^e.charCodeAt(i))]),-1^n},e.buf=function(e,t){if(e.length>1e4)return function(e,t){for(var n=-1^t,o=e.length-7,i=0;i<o;)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])];for(;i<o+7;)n=n>>>8^r[255&(n^e[i++])];return-1^n}(e,t);for(var n=-1^t,o=e.length-3,i=0;i<o;)n=(n=(n=(n=n>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])])>>>8^r[255&(n^e[i++])];for(;i<o+3;)n=n>>>8^r[255&(n^e[i++])];return-1^n},e.str=function(e,t){for(var n,o,i=-1^t,a=0,c=e.length;a<c;)(n=e.charCodeAt(a++))<128?i=i>>>8^r[255&(i^n)]:n<2048?i=(i=i>>>8^r[255&(i^(192|n>>6&31))])>>>8^r[255&(i^(128|63&n))]:n>=55296&&n<57344?(n=64+(1023&n),o=1023&e.charCodeAt(a++),i=(i=(i=(i=i>>>8^r[255&(i^(240|n>>8&7))])>>>8^r[255&(i^(128|n>>2&63))])>>>8^r[255&(i^(128|o>>6&15|(3&n)<<4))])>>>8^r[255&(i^(128|63&o))]):i=(i=(i=i>>>8^r[255&(i^(224|n>>12&15))])>>>8^r[255&(i^(128|n>>6&63))])>>>8^r[255&(i^(128|63&n))];return-1^i}},"undefined"===typeof DO_NOT_EXPORT_CRC?n(r):n({})},"cHV+":function(e,r,t){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var o=t("Z5Wq"),i=n(t("HtvZ")),a=n(t("qpVQ")),c={create:function(e){return e},toString:function(e){return e},builder:function(e){if("string"!==typeof e)throw Error("Invalid document snapshot: "+e);var r=[];return{skip:function(t){var n=o.uniToStrPos(e,t);if(n>e.length)throw Error("The op is too long for this document");r.push(e.slice(0,n)),e=e.slice(n)},append:function(e){r.push(e)},del:function(r){e=e.slice(o.uniToStrPos(e,r))},build:function(){return r.join("")+e}}}},s=i.default(c),u=Object.assign({},s,{api:a.default});r.type=u;var l=t("HtvZ");r.makeType=l.default},"dI/k":function(e,r,t){"use strict";t.d(r,"f",(function(){return i})),t.d(r,"j",(function(){return a})),t.d(r,"d",(function(){return c})),t.d(r,"b",(function(){return u})),t.d(r,"e",(function(){return d})),t.d(r,"c",(function(){return l})),t.d(r,"a",(function(){return f})),t.d(r,"h",(function(){return s})),t.d(r,"g",(function(){return p})),t.d(r,"i",(function(){return h}));var n=t("tpqs"),o={pdf:"application/pdf","3gpp":"video/3gpp",adp:"audio/adpcm",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mp3:"audio/mpeg",m4a:"audio/mp4",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",uva:"audio/vnd.dece.audio",uvva:"audio/vnd.dece.audio",eol:"audio/vnd.digital-winds",dra:"audio/vnd.dra",dts:"audio/vnd.dts",dtshd:"audio/vnd.dts.hd",lvp:"audio/vnd.lucent.voice",pya:"audio/vnd.ms-playready.media.pya",ecelp4800:"audio/vnd.nuera.ecelp4800",ecelp7470:"audio/vnd.nuera.ecelp7470",ecelp9600:"audio/vnd.nuera.ecelp9600",rip:"audio/vnd.rip",wav:"audio/wave",weba:"audio/webm",aac:"audio/x-aac",aif:"audio/x-aiff",aiff:"audio/x-aiff",aifc:"audio/x-aiff",caf:"audio/x-caf",flac:"audio/x-flac",mka:"audio/x-matroska",m3u:"audio/x-mpegurl",wax:"audio/x-ms-wax",wma:"audio/x-ms-wma",ram:"audio/x-pn-realaudio",ra:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",xm:"audio/xm",exr:"image/aces",apng:"image/apng",bmp:"image/bmp",cgm:"image/cgm",drle:"image/dicom-rle",emf:"image/emf",fits:"image/fits",g3:"image/g3fax",gif:"image/gif",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",hsj2:"image/hsj2",ief:"image/ief",jls:"image/jls",jp2:"image/jp2",jpg2:"image/jp2",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",jph:"image/jph",jhc:"image/jphc",jpm:"image/jpm",jpx:"image/jpx",jpf:"image/jpx",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",ktx:"image/ktx",png:"image/png",btif:"image/prs.btif",pti:"image/prs.pti",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",t38:"image/t38",tif:"image/tiff",tiff:"image/tiff",tfx:"image/tiff-fx",psd:"image/vnd.adobe.photoshop",azv:"image/vnd.airzip.accelerator.azv",uvi:"image/vnd.dece.graphic",uvvi:"image/vnd.dece.graphic",uvg:"image/vnd.dece.graphic",uvvg:"image/vnd.dece.graphic",djvu:"image/vnd.djvu",djv:"image/vnd.djvu",sub:"image/vnd.dvb.subtitle",dwg:"image/vnd.dwg",dxf:"image/vnd.dxf",fbs:"image/vnd.fastbidsheet",fpx:"image/vnd.fpx",fst:"image/vnd.fst",mmr:"image/vnd.fujixerox.edmics-mmr",rlc:"image/vnd.fujixerox.edmics-rlc",ico:"image/vnd.microsoft.icon",dds:"image/vnd.ms-dds",mdi:"image/vnd.ms-modi",wdp:"image/vnd.ms-photo",npx:"image/vnd.net-fpx",tap:"image/vnd.tencent.tap",vtf:"image/vnd.valve.source.texture",wbmp:"image/vnd.wap.wbmp",xif:"image/vnd.xiff",pcx:"image/vnd.zbrush.pcx",webp:"image/webp",wmf:"image/wmf","3ds":"image/x-3ds",ras:"image/x-cmu-raster",cmx:"image/x-cmx",fh:"image/x-freehand",fhc:"image/x-freehand",fh4:"image/x-freehand",fh5:"image/x-freehand",fh7:"image/x-freehand",jng:"image/x-jng",sid:"image/x-mrsid-image",pic:"image/x-pict",pct:"image/x-pict",pnm:"image/x-portable-anymap",pbm:"image/x-portable-bitmap",pgm:"image/x-portable-graymap",ppm:"image/x-portable-pixmap",rgb:"image/x-rgb",tga:"image/x-tga",xbm:"image/x-xbitmap",xpm:"image/x-xpixmap",xwd:"image/x-xwindowdump","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpeg",jpgm:"video/jpm",mj2:"video/mj2",mjp2:"video/mj2",ts:"video/mp2t",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",uvh:"video/vnd.dece.hd",uvvh:"video/vnd.dece.hd",uvm:"video/vnd.dece.mobile",uvvm:"video/vnd.dece.mobile",uvp:"video/vnd.dece.pd",uvvp:"video/vnd.dece.pd",uvs:"video/vnd.dece.sd",uvvs:"video/vnd.dece.sd",uvv:"video/vnd.dece.video",uvvv:"video/vnd.dece.video",dvb:"video/vnd.dvb.file",fvt:"video/vnd.fvt",mxu:"video/vnd.mpegurl",m4u:"video/vnd.mpegurl",pyv:"video/vnd.ms-playready.media.pyv",uvu:"video/vnd.uvvu.mp4",uvvu:"video/vnd.uvvu.mp4",viv:"video/vnd.vivo",webm:"video/webm",f4v:"video/x-f4v",fli:"video/x-fli",flv:"video/x-flv",m4v:"video/x-m4v",mkv:"video/x-matroska",mk3d:"video/x-matroska",mks:"video/x-matroska",mng:"video/x-mng",asf:"video/x-ms-asf",asx:"video/x-ms-asf",vob:"video/x-ms-vob",wm:"video/x-ms-wm",wmv:"video/x-ms-wmv",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",avi:"video/x-msvideo",movie:"video/x-sgi-movie",smv:"video/x-smv"};function i(e){return e.split("/")[0]}function a(e){return e.split("/").slice(1).join("/")}function c(e){return o[u(e).toLowerCase()]}function s(e){return!e.endsWith(".ts")&&!!c(e)}function u(e){return Object(n.extname)(e).slice(1)}function l(e){return e.split("/").pop()}function f(e){return l(e).split(".")[0]}function d(e){return e.split("/").slice(0,-1).join("/")}function p(e){return e.endsWith(".draw")}function h(e){return e.endsWith(".pedit")||e.endsWith(".kbmsprite")}},gfZM:function(e,r,t){"use strict";(function(e){var n=t("H+61"),o=t("UlJF"),i=function(){function r(t,o){if(Object(n.a)(this,r),this.asEncoding={},this.asBuffer=null,o&&"string"===typeof t)this.asEncoding[o]=t;else if(void 0===t||null===t)this.asBuffer=e.alloc(0);else if(t instanceof e)this.asBuffer=t;else if("string"===typeof t)this.asEncoding.utf8=t;else if(t instanceof ArrayBuffer)this.asBuffer=e.from(t);else{if(t instanceof r)return t;t instanceof Uint8Array?this.asBuffer=e.from(t):"object"===typeof t&&"object"===typeof t.asEncoding&&null!==t.asEncoding&&(t.asBuffer instanceof e||null===t.asBuffer)&&(this.asBuffer=t.asBuffer||null,"string"===typeof t.asEncoding.base64&&(this.asEncoding={base64:t.asEncoding.base64}),"string"===typeof t.asEncoding.utf8&&(this.asEncoding={utf8:t.asEncoding.utf8}))}}return Object(o.a)(r,null,[{key:"from",value:function(e,t){return new r(e,t)}},{key:"isBuffer",value:function(e){return e instanceof r}}]),Object(o.a)(r,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var r=this.toBuffer(),t=r.toString(e);return this.asEncoding[e]=t,t}},{key:"toJSON",value:function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}}},{key:"toBuffer",value:function(){if(this.asBuffer)return this.asBuffer;for(var r in this.asEncoding){var t=this.asEncoding[r];if("string"===typeof t){var n=e.from(t,r);return this.asBuffer=n,n}}return this.asBuffer=e.alloc(0),this.asBuffer}},{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}}]),r}();r.a=i}).call(this,t("HDXh").Buffer)},qpVQ:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("Z5Wq");function o(e,r){return{get:e,getLength:function(){return e().length},insert:function(t,o,i){var a=n.strPosToUni(e(),t);return r([a,o],i)},remove:function(t,o,i){var a=n.strPosToUni(e(),t);return r([a,{d:o}],i)},_onOp:function(e){for(var r=0,t=0;t<e.length;t++){var n=e[t];switch(typeof n){case"number":r+=n,n;break;case"string":this.onInsert&&this.onInsert(r,n),r+=n.length;break;case"object":this.onRemove&&this.onRemove(r,n.d),n.d}}},onInsert:null,onRemove:null}}r.default=o,o.provides={text:!0}},tSgl:function(e,r){e.exports={isHiddenFile:function(e){return/^(\.env$|\.npm$|\.npm\/|__pycache__|\.cache|\.git$|\.git\/|\.upm$|\.upm\/|node_modules$|node_modules\/|_test_runner)/.test(e)},ignoredDirs:[".git",".upm",".cache","__pycache__","node_modules"]}},vaah:function(e,r,t){"use strict";t.d(r,"a",(function(){return u}));var n=t("cpVT"),o=t("kWuB"),i=t("zgDP");function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){Object(n.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var s=new o.a({dsn:"https://7f707426a65447cc94b6fca9a2a4afb9@sentry.replit.com/14",release:"8c89335",environment:"production",beforeSend:function(e,r){var t;return r&&(t=r.originalException,Boolean(t&&"object"===typeof t&&"CustomSentryError"===t.name))&&(r.originalException.extras&&(e.extra=c(c({},e.extra),r.originalException.extras)),r.originalException.tags&&(e.tags=c(c({},e.tags),r.originalException.tags))),e}});function u(e,r){if(Object(i.track)(i.events.WS_CRASHED),s){var t;try{throw new Error("Sentry syntheticException")}catch(n){t=n}return s.captureException(e,{originalException:e,syntheticException:t},r)}}},vyFI:function(e,r,t){"use strict";t.d(r,"a",(function(){return w}));var n=t("z7pX"),o=t("vJKn"),i=t.n(o),a=t("cpVT"),c=t("rg98"),s=t("xvhg"),u=t("q1tI"),l=t("tpqs");function f(e,r,t){return[t.state.EditorState.tabSize.of(e),t.language.indentUnit.of(r?" ".repeat(e):"\t")]}function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){Object(a.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var h="var(--deprecated-color-background-1)",m="var(--deprecated-color-foreground-1)",v=function(e,r){return{"&":{backgroundColor:h,color:m,"&.cm-focused":{outline:"0 none"},fontSize:"".concat(e,"px")},".cm-content":{fontFamily:"var(--deprecated-font-family-monospace)",paddingBottom:"".concat(r?"400px":"0px")},".cm-scroller":{overflow:"auto",fontFamily:"var(--deprecated-font-family-monospace)",fontSize:"".concat(e,"px")},".cm-gutters":{backgroundColor:h,color:"var(--deprecated-color-foreground-3)",border:"none",paddingRight:"var(--deprecated-spacing-half)",minWidth:"50px",display:"flex",justifyContent:"flex-end"},".cm-selectionBackground":{background:"var(--deprecated-color-primary-transparent-2)"},"&.cm-focused .cm-selectionBackgroundFocused":{background:"var(--deprecated-color-primary-transparent-1)"},".cm-cursor":{borderLeftColor:"var(--deprecated-color-primary-2)"},".cm-cursorFocused":{borderLeftColor:"var(--deprecated-color-primary-1)"},".cm-activeLine":{backgroundColor:"var(--deprecated-color-primary-transparent-3)"},".cm-specialChar":{color:"var(--deprecated-color-negative-1)"},".cm-placeholder":{color:"var(--deprecated-color-foreground-2)",display:"inline-block"},".cm-textfield":{border:"1px solid var(--deprecated-color-border)",backgroundColor:h},".cm-foldPlaceholder":{padding:"0 var(--deprecated-spacing-half)",borderRadius:"var(--deprecated-border-radius-1)",backgroundColor:"var(--deprecated-color-background-3)",border:"none",color:"var(--deprecated-color-foreground-2)"},".cm-panels":{backgroundColor:"var(--deprecated-color-background-3)",color:m},".cm-panels.top":{borderBottom:"2px solid var(--deprecated-color-border)"},".cm-panels.bottom":{borderTop:"2px solid var(--deprecated-color-border)"},".cm-searchMatch":{backgroundColor:"var(--deprecated-color-primary-transparent-2)"},".cm-searchMatch.selected":{backgroundColor:"var(--deprecated-color-primary-transparent-1)"},".cm-matchingBracket, .cm-nonmatchingBracket":{backgroundColor:"var(--deprecated-color-green-transparent-1)"},".cm-tooltip":{backgroundColor:"var(--deprecated-color-background-1)",color:"var(--deprecated-color-foreground-1)",boxShadow:"var(--deprecated-shadow-1)",border:"1px solid var(--deprecated-color-border)",borderRadius:"var(--deprecated-border-radius-1)",padding:"var(--deprecated-spacing-half)"},".cm-tooltip.multiplayer":{backgroundColor:"transparent",boxShadow:"none",border:"0 none"},".cm-tooltip .cursor":{top:"calc(100% - 1px)",left:"-1px",width:"2px",borderRadius:"var(--deprecated-border-radius-1)",pointerEvents:"none",position:"absolute",color:"transparent"},".cm-tooltip .label":{boxShadow:"var(--deprecated-shadow-1)",padding:"1px",position:"relative",left:"-1px",borderRadius:"var(--deprecated-border-radius-1)",borderBottomLeftRadius:"0px",animation:"fadeOut 2s ease-in forwards"},"@keyframes fadeOut":{"0%":{opacity:1},"100%":{opacity:0}},".cm-tooltip.autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:"var(--deprecated-color-primary-1)",color:"var(--deprecated-color-white)"}}}};function b(e){var r=e.theme,t=e.codemirror,n=e.fontSize,o=e.hasExtraPadding;return"replitDark"===r?function(e){var r=e.codemirror.highlight,t=r.tags,n=r.HighlightStyle;return{base:e.codemirror.view.EditorView.theme(p({},v(e.fontSize,e.hasExtraPadding)),{dark:!0}),highlight:n.define([{tag:t.link,textDecoration:"underline"},{tag:t.heading,fontWeight:"bold"},{tag:t.emphasis,fontStyle:"italic"},{tag:t.strong,fontWeight:"bold"},{tag:[t.keyword,t.operator],color:"#569cd6"},{tag:[t.atom,t.bool,t.url,t.contentSeparator,t.labelName],color:"#70b6f0"},{tag:[t.literal,t.inserted,t.number],color:"#b5cea8"},{tag:[t.string,t.deleted],color:"#ce9178"},{tag:[t.regexp,t.escape,t.special(t.string)],color:"#d16969"},{tag:t.definition(t.variableName),color:"var(--deprecated-color-foreground-1)"},{tag:t.local(t.variableName),color:"#74b0df"},{tag:[t.typeName,t.namespace],color:"#dcdcaa"},{tag:[t.className,t.variableName,t.special(t.variableName),t.macroName],color:"#dcdcaa"},{tag:t.definition(t.propertyName),color:"#9cdcfe"},{tag:t.comment,color:"var(--deprecated-color-foreground-2)"},{tag:t.meta,color:"#74b0df"},{tag:t.invalid,color:"#ff69b4"}])}}({codemirror:t,fontSize:n,hasExtraPadding:o}):function(e){var r=e.codemirror.view.EditorView.theme(p({},v(e.fontSize,e.hasExtraPadding)),{dark:!1}),t=e.codemirror.highlight,n=t.tags;return{base:r,highlight:t.HighlightStyle.define([{tag:n.link,textDecoration:"underline"},{tag:n.heading,fontWeight:"bold"},{tag:n.emphasis,fontStyle:"italic"},{tag:n.strong,fontWeight:"bold"},{tag:[n.keyword,n.operator],color:"#0000ff"},{tag:[n.atom,n.bool,n.url,n.contentSeparator,n.labelName],color:"#1a1aff"},{tag:[n.literal,n.inserted,n.number],color:"#09885a"},{tag:[n.string,n.deleted],color:"#a31515"},{tag:[n.regexp,n.escape,n.special(n.string)],color:"#227e80"},{tag:n.definition(n.variableName),color:"var(--deprecated-color-foreground-1)"},{tag:n.local(n.variableName),color:"#001188"},{tag:[n.typeName,n.namespace],color:"#7b2cb3"},{tag:[n.className,n.variableName,n.special(n.variableName),n.macroName],color:"#7b2cb3"},{tag:n.definition(n.propertyName),color:"#984e9c"},{tag:n.comment,color:"#aaaaaa"},{tag:n.meta,color:"#00808"},{tag:n.invalid,color:"#ff69b4"}])}}({codemirror:t,fontSize:n,hasExtraPadding:o})}function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){Object(a.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function w(){var e=u.useState(null),r=Object(s.a)(e,2),n=r[0],o=r[1],a=u.useState(null),l=Object(s.a)(a,2),d=l[0],p=l[1];return u.useEffect((function(){if(n){var e,r=!1;return function(){o.apply(this,arguments)}(),function(){r=!0,p(null),e&&(e.destroy(),e=null)}}function o(){return(o=Object(c.a)(i.a.mark((function o(){var a,c,s,u,l,d;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.all([t.e(53),t.e(7),t.e(340)]).then(t.bind(null,"PlTE"));case 2:if(a=o.sent,n&&!r){o.next=5;break}return o.abrupt("return");case 5:c=new a.state.Compartment,s=new a.state.Compartment,u=new a.state.Compartment,l=new a.state.Compartment,d=new a.state.Compartment,e=new a.view.EditorView({parent:n}),p({view:e,codemirror:a,setTheme:function(r){if(!e)throw new Error("Expected view");var t=b(y(y({},r),{},{codemirror:a}));e.dispatch({effects:[c.reconfigure(t.base),s.reconfigure(t.highlight)]})},setIndentSize:function(r){if(!e)throw new Error("Expected view");var t=f(r.indentSize,r.indentIsSpace,a);e.dispatch({effects:[u.reconfigure(t)]})},setLspExtensions:function(r){if(!e)throw new Error("Expected view");e.dispatch({effects:l.reconfigure(r)})},setLineWrapping:function(r){if(!e)throw new Error("Expected view");e.dispatch({effects:d.reconfigure(r?a.view.EditorView.lineWrapping:[])})},loadExentions:function(e){return j({filename:e.filename,theme:e.theme,indentation:e.indentation,keyBindings:e.keyBindings,enableSearchKeyBinding:e.enableSearchKeyBinding,tabBinding:e.tabBinding,isSoftWrap:e.isSoftWrap,codemirror:a,themeCompartment:c,highlightCompartment:s,indentSizeCompartment:u,lspCompartment:l,lineWrappingCompartment:d})}});case 12:case"end":return o.stop()}}),o)})))).apply(this,arguments)}}),[n]),[d,o]}function x(e,r){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(i.a.mark((function e(r,n){var o,a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Markdown"!==(null===(o=n?r.language.LanguageDescription.matchFilename(r.languageData.languages,n):null)||void 0===o?void 0:o.name)){e.next=6;break}return e.next=4,Promise.all([t.e(53),t.e(9),t.e(7),t.e(29),t.e(169)]).then(t.bind(null,"S0tx"));case 4:return a=e.sent,e.abrupt("return",a.markdown({codeLanguages:r.languageData.languages.filter((function(e){return"Markdown"!==e.name}))}));case 6:if(!o){e.next=8;break}return e.abrupt("return",o.load());case 8:if(c=Object(l.extname)(n).slice(1),!["php","vue","svelte"].includes(c)){e.next=12;break}return s=r.languageData.languages.find((function(e){return"HTML"===e.name})),e.abrupt("return",s?s.load():null);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(i.a.mark((function e(r){var t,o,a,c,s,u,l,d,p,h,m,v,g,w,O,j,k,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.filename,o=r.codemirror,a=r.theme,c=r.indentation,s=r.keyBindings,u=r.themeCompartment,l=r.highlightCompartment,d=r.indentSizeCompartment,p=r.tabBinding,h=r.enableSearchKeyBinding,m=void 0===h||h,v=r.lspCompartment,g=r.lineWrappingCompartment,w=r.isSoftWrap,e.next=3,x(o,t);case 3:return O=e.sent,j=b(y(y({},a),{},{codemirror:o})),k=f(c.indentSize,c.indentIsSpace,o),E=[o.gutter.lineNumbers(),o.view.highlightSpecialChars(),o.fold.foldGutter(),o.history.history(),o.view.drawSelection(),o.state.EditorState.allowMultipleSelections.of(!0),o.language.indentOnInput(),o.matchbrackets.bracketMatching(),o.closebrackets.closeBrackets(),o.autocomplete.autocompletion(),o.rectangularSelection.rectangularSelection(),o.search.highlightSelectionMatches()].concat(Object(n.a)(O?[O]:[]),[u.of(j.base),l.of(j.highlight),d.of(k),v.of([]),g.of(w?o.view.EditorView.lineWrapping:[]),o.view.keymap.of([].concat(Object(n.a)(o.commands.defaultKeymap),Object(n.a)(o.closebrackets.closeBracketsKeymap),Object(n.a)(o.history.historyKeymap),Object(n.a)(o.fold.foldKeymap),Object(n.a)(o.comment.commentKeymap),Object(n.a)(o.autocomplete.completionKeymap),Object(n.a)(o.lint.lintKeymap),Object(n.a)(m?o.search.searchKeymap:[]),[p||o.commands.defaultTabBinding],Object(n.a)(s||[])))]),e.abrupt("return",E);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=1a8fe60234112d2e38c2712b50aeeb255e8f4292.dd0ad2fd4a8a2fdbfc82.js.map